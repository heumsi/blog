<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-rh="true" property="keywords" content="Python,Translated"/><meta data-rh="true" property="og:image" content="/blog/static/46b0cc875e4869af0a26df58b895d49d/abd46/thumbnail.png"/><meta data-rh="true" property="og:description" content="파이썬 3.11의 주요 특징들 살펴보기"/><meta data-rh="true" property="og:title" content="[번역글] 파이썬 3.11에서의 새로운 기능들"/><meta data-rh="true" property="og:url" content="https://heumsi.github.io/blog/posts/python311-new-features/"/><meta data-rh="true" name="description" content="파이썬 3.11의 주요 특징들 살펴보기"/><meta data-rh="true" name="googlebot" content="index,follow"/><meta data-rh="true" name="robots" content="index,follow"/><meta data-rh="true" property="og:site_name" content="하나씩. 점을. 찍어나가며."/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" name="twitter:creator" content="@handle"/><meta data-rh="true" name="twitter:site" content="@site"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta name="generator" content="Gatsby 4.17.2"/><style data-href="/blog/styles.202b843a3255cda52de9.css" data-identity="gatsby-global-css">/*! minireset.css v0.0.7 | MIT License | github.com/jgthms/minireset.css */blockquote,body,dd,dl,dt,fieldset,figure,h1,h2,h3,h4,h5,h6,hr,html,iframe,legend,li,ol,p,pre,textarea,ul{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}ul{list-style:none}button,input,select{margin:0}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}img,video{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}code[class*=language-],pre[class*=language-]{background:#fafafa;color:#383a42;direction:ltr;font-family:Fira Code,Fira Mono,Menlo,Consolas,DejaVu Sans Mono,monospace;font-size:.95em;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#e5e5e6;color:inherit}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection{background:#e5e5e6;color:inherit}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.2em .3em;white-space:normal}.token.cdata,.token.comment,.token.prolog{color:#a0a1a7}.token.doctype,.token.entity,.token.punctuation{color:#383a42}.token.atrule,.token.attr-name,.token.boolean,.token.class-name,.token.constant,.token.number{color:#b76b01}.token.keyword{color:#a626a4}.token.deleted,.token.important,.token.property,.token.symbol,.token.tag{color:#e45649}.token.attr-value,.token.attr-value>.token.punctuation,.token.builtin,.token.char,.token.inserted,.token.regex,.token.selector,.token.string{color:#50a14f}.token.function,.token.operator,.token.variable{color:#4078f2}.token.url{color:#0184bc}.token.attr-value>.token.punctuation.attr-equals,.token.special-attr>.token.attr-value>.token.value.css{color:#383a42}.language-css .token.selector{color:#e45649}.language-css .token.property{color:#383a42}.language-css .token.function,.language-css .token.url>.token.function{color:#0184bc}.language-css .token.url>.token.string.url{color:#50a14f}.language-css .token.atrule .token.rule,.language-css .token.important,.language-javascript .token.operator{color:#a626a4}.language-javascript .token.template-string>.token.interpolation>.token.interpolation-punctuation.punctuation{color:#ca1243}.language-json .token.operator{color:#383a42}.language-json .token.null.keyword{color:#b76b01}.language-markdown .token.url,.language-markdown .token.url-reference.url>.token.string,.language-markdown .token.url>.token.operator{color:#383a42}.language-markdown .token.url>.token.content{color:#4078f2}.language-markdown .token.url-reference.url,.language-markdown .token.url>.token.url{color:#0184bc}.language-markdown .token.blockquote.punctuation,.language-markdown .token.hr.punctuation{color:#a0a1a7;font-style:italic}.language-markdown .token.code-snippet{color:#50a14f}.language-markdown .token.bold .token.content{color:#b76b01}.language-markdown .token.italic .token.content{color:#a626a4}.language-markdown .token.list.punctuation,.language-markdown .token.strike .token.content,.language-markdown .token.strike .token.punctuation,.language-markdown .token.title.important>.token.punctuation{color:#e45649}.token.bold{font-weight:700}.token.comment,.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.8}.token.token.cr:before,.token.token.lf:before,.token.token.space:before,.token.token.tab:not(:empty):before{color:rgba(56,58,66,.2)}div.code-toolbar>.toolbar.toolbar>.toolbar-item{margin-right:.4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span{background:#e5e5e6;border-radius:.3em;color:#696c77;padding:.1em .4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:hover{background:#c6c7c7;color:#383a42}.line-highlight.line-highlight{background:rgba(56,58,66,.05)}.line-highlight.line-highlight:before,.line-highlight.line-highlight[data-end]:after{background:#e5e5e6;border-radius:.3em;box-shadow:0 2px 0 0 rgba(0,0,0,.2);color:#383a42;padding:.1em .6em}pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:rgba(56,58,66,.05)}.command-line .command-line-prompt,.line-numbers.line-numbers .line-numbers-rows{border-right-color:rgba(56,58,66,.2)}.command-line .command-line-prompt>span:before,.line-numbers .line-numbers-rows>span:before{color:#9d9d9f}.rainbow-braces .token.token.punctuation.brace-level-1,.rainbow-braces .token.token.punctuation.brace-level-5,.rainbow-braces .token.token.punctuation.brace-level-9{color:#e45649}.rainbow-braces .token.token.punctuation.brace-level-10,.rainbow-braces .token.token.punctuation.brace-level-2,.rainbow-braces .token.token.punctuation.brace-level-6{color:#50a14f}.rainbow-braces .token.token.punctuation.brace-level-11,.rainbow-braces .token.token.punctuation.brace-level-3,.rainbow-braces .token.token.punctuation.brace-level-7{color:#4078f2}.rainbow-braces .token.token.punctuation.brace-level-12,.rainbow-braces .token.token.punctuation.brace-level-4,.rainbow-braces .token.token.punctuation.brace-level-8{color:#a626a4}pre.diff-highlight>code .token.token.deleted:not(.prefix),pre>code.diff-highlight .token.token.deleted:not(.prefix){background-color:rgba(255,82,102,.15)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix),pre>code.diff-highlight .token.token.inserted:not(.prefix){background-color:rgba(25,255,91,.15)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection{background-color:rgba(56,224,98,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::selection{background-color:rgba(56,224,98,.25)}.prism-previewer-gradient.prism-previewer-gradient div,.prism-previewer.prism-previewer:before{border-color:hsl(0,0,95%)}.prism-previewer-color.prism-previewer-color:before,.prism-previewer-easing.prism-previewer-easing:before,.prism-previewer-gradient.prism-previewer-gradient div{border-radius:.3em}.prism-previewer.prism-previewer:after{border-top-color:hsl(0,0,95%)}.prism-previewer-flipped.prism-previewer-flipped.after{border-bottom-color:hsl(0,0,95%)}.prism-previewer-angle.prism-previewer-angle:before,.prism-previewer-easing.prism-previewer-easing,.prism-previewer-time.prism-previewer-time:before{background:#fff}.prism-previewer-angle.prism-previewer-angle circle,.prism-previewer-time.prism-previewer-time circle{stroke:#383a42;stroke-opacity:1}.prism-previewer-easing.prism-previewer-easing circle,.prism-previewer-easing.prism-previewer-easing line,.prism-previewer-easing.prism-previewer-easing path{stroke:#383a42}.prism-previewer-easing.prism-previewer-easing circle{fill:transparent}.gatsby-highlight-code-line{background-color:#eee;display:block;margin-left:-1em;margin-right:-1em;padding-left:1em;padding-right:1em}.gatsby-highlight{background:#fafafa;margin:0 0 1em;overflow:auto;padding:1em}.gatsby-highlight pre[class*=language-]{background-color:transparent;float:left;margin:0;min-width:100%;overflow:initial;padding:0}.toc{overflow-y:auto}.toc>.toc-list{overflow:hidden;position:relative}.toc>.toc-list li{list-style:none}.toc-list{margin:0;padding-left:10px}a.toc-link{color:currentColor;height:100%}.is-collapsible{max-height:1000px;overflow:hidden;transition:all .3s ease-in-out}.is-collapsed{max-height:0}.is-position-fixed{position:fixed!important;top:0}.is-active-link{font-weight:700}.toc-link:before{background-color:#eee;content:" ";display:inline-block;height:inherit;left:0;margin-top:-1px;position:absolute;width:2px}.is-active-link:before{background-color:#54bc4b}.toc{color:#333;font-size:.8em;left:0;line-height:1.8em;max-width:20rem;padding-left:1rem;position:fixed;top:50vh;transform:translateY(-50%);transition:all .4s cubic-bezier(.25,.8,.4,.95);visibility:visible;width:100%}.toc-list-item{font-weight:300}.is-active-link{font-weight:400}.toc-hidden{transform:translate(-100%,-50%);visibility:hidden}.toc-link:before{background-color:inherit}@media only screen and (max-width:85rem){.toc{visibility:hidden}}*{color:inherit;text-decoration:none}body{-ms-text-size-adjust:100%;-moz-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#333;font-size:1rem;word-break:break-all}h1{font-size:2.441em}h1,h2{font-weight:700}h2{font-size:1.953em}h3{font-size:1.563em}h3,h4{font-weight:700}h4{font-size:1.25em}li,p{font-size:1em;font-weight:400;line-height:1.8em}a{cursor:pointer}.container{font-family:sans-serif;margin:auto;max-width:45rem;width:100%}header{align-items:center;display:flex;justify-content:space-between;margin:1.5rem 0 1rem}header .site-title{font-weight:700;margin:0;transition:.33s}header .site-title:hover{color:#344cb7}header nav{display:flex;font-weight:400}header nav .nav-item a{padding-right:1.5rem;transition:.33s}header nav .nav-item a:hover{color:#344cb7}header nav .nav-item a:last-child{padding-right:0}.content .page-title{font-weight:500}.content .post-item{align-items:center;list-style:none;margin:2rem 0;transition:.33s}.content .post-item:hover{color:#344cb7}.content .post-item a{text-decoration:none}.content .post-item article{display:flex}.content .post-item-thumbnail{height:7rem;width:7rem}.content .post-item-desc{display:flex;flex-direction:column;height:7rem;margin-left:1.5rem}.content .post-item-title{font-weight:400;margin-top:0}.content .post-item-sub-title{line-height:1.4em;margin-top:.5rem}.content .post-item-meta{color:#666;font-size:.9em;line-height:1em;margin:auto 0 0}.content .post-cover-image{height:400px;left:50%;margin-bottom:2rem;margin-left:-50vw;margin-right:-50vw;max-width:100vw;position:relative;right:50%;width:100vw}.content .post-sub-title{color:#666;font-weight:400;margin-top:1rem}.content .post-meta{color:#666;display:block;margin-top:.5rem}.content .post-content{margin:3rem 0 5rem}.content .log-content{margin-top:1rem}.content .post-content h2,h3,h4{margin-top:2em}.content .post-content p{margin:1em 0}.content .post-content hr{background-color:#eee;border:0;height:1px;margin:2em}.content .post-content table{overflow-x:auto;width:100%}.content .post-content table th{background-color:#fafafa}.content .post-content table th,td{border:1px solid #ccc;padding:.5em}.content .log-content a,.content .post-content a{text-decoration:underline}.content .post-content>ul{margin:1em 0}.content .log-content ul li,.content .post-content ul li{list-style:outside;margin-left:1em}.content .log-content ul li p,.content .post-content ul li p{margin:0}.content .log-content ol li,.content .post-content ol li{margin-left:1em}.content .post-content .gatsby-resp-image-wrapper{margin:2em 0}.content .log-content .gatsby-resp-image-wrapper{margin:1em 0;margin-left:0!important;margin-right:0!important;max-width:100%!important}.content .log-content .gatsby-resp-image-wrapper+em,.content .post-content .gatsby-resp-image-wrapper+em{color:#999;display:block;font-size:.9em;font-style:normal;line-height:1.5em;margin:-1.5em auto 2em;max-width:90%;text-align:center}.content .log-content blockquote,.content .post-content blockquote{background:#f6f6f6;border-left:4px solid #e6e6e6;color:#666;margin:1rem 0;padding:1rem}.content .log-content blockquote code,.content .post-content blockquote code{color:#666}.content .log-content blockquote ol,.content .log-content blockquote p,.content .log-content blockquote ul,.content .post-content blockquote ol,.content .post-content blockquote p,.content .post-content blockquote ul{margin:1em 0}.content .log-content blockquote p:first-child,.content .log-content blockquote p:last-child,.content .post-content blockquote p:first-child,.content .post-content blockquote p:last-child{margin:0}.content .post-content .mermaid{margin:0 auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.content .log-item{line-height:1.8em;margin:2rem 0}.content .log-title span{cursor:pointer;font-size:.6em;margin-left:.6em;opacity:.6;transition:.33s}.content .log-title span:hover{opacity:1}.content .log-content a{text-decoration:underline}.content .log-datetime{color:#666;font-size:.9em}footer{align-items:center;color:#666;display:flex;justify-content:space-between;margin:3rem 0}footer .external-links li{display:inline-block;margin:0 .5rem;transition:.33s}footer .external-links li:hover{color:#344cb7}footer .copy-right{font-size:.9rem;text-align:right}@media screen and (max-width:800px){html{font-size:1rem}h1{font-size:1.749em}h1,h2{font-weight:700}h2{font-size:1.521em}h3{font-size:1.322em}h3,h4{font-weight:700}h4{font-size:1.15em}.container{padding:0 1rem}header .site-title{font-size:1rem}header nav .nav-item a{padding-right:1rem}.content .post-list .post-item{border-bottom:1px solid #ccc;margin:0 -1rem;padding:1rem}.content .post-list .post-item:last-child{border-bottom:none}.content .post-list .post-item a{text-decoration:none}.content .post-cover-image{margin-bottom:1.5rem}.content .page-title{font-size:1rem}.content .post-item-title{font-size:1.2rem}.content .post-item-thumbnail{display:none!important}.content .post-item-desc{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin-left:0}.content .post-item-meta{line-height:1.4em}footer{margin:1rem 0}}</style><link rel="preconnect" href="https://plausible.io"/><script async="" defer="" data-domain="heumsi.github.io/blog" src="https://plausible.io/js/plausible.js"></script><script>
          window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) };
          
          </script><title data-rh="true">[번역글] 파이썬 3.11에서의 새로운 기능들</title><link data-rh="true" rel="canonical" href="https://heumsi.github.io/blog/posts/python311-new-features/"/><script data-rh="true" defer="" src="https://cloud.umami.is/script.js" data-website-id="c247e343-b8cb-4751-8e13-8e8557a94875"></script><link rel="sitemap" type="application/xml" href="/blog/sitemap/sitemap-index.xml"/><link rel="alternate" type="application/rss+xml" title="하나씩 점을 찍어나가며 - Heumsi의 블로그 RSS" href="/blog/rss.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZRH97WV1XY"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'G-ZRH97WV1XY'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = false;

    var options = {
      send_page_view: false
    };
    if (false) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'G-ZRH97WV1XY', options);
  </script><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="container"><header><h3 class="site-title"><a href="/blog/">하나씩. 점을. 찍어나가며.</a></h3><nav><ul><li class="nav-item"><a class="nav-link-text" href="/blog/posts">글</a><a class="nav-link-text" href="/blog/logs">로그</a></li></ul></nav></header><main class="content"><section class="post-cover-image gbi-205228265-3QH9ufy5JxrAwrde1Mmz3X" style="background-position:center;background-repeat:no-repeat;background-size:cover;position:relative"><style>
          .post-cover-image.gbi-205228265-3QH9ufy5JxrAwrde1Mmz3X:before,
          .post-cover-image.gbi-205228265-3QH9ufy5JxrAwrde1Mmz3X:after {
            content: '';
            display: block;
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            
            transition: opacity 0.5s ease 250ms;
            background-position: center;
background-repeat: no-repeat;
background-size: cover;

          }
          .post-cover-image.gbi-205228265-3QH9ufy5JxrAwrde1Mmz3X:before {
            z-index: -100;
            
            
            opacity: 1; 
          }
          .post-cover-image.gbi-205228265-3QH9ufy5JxrAwrde1Mmz3X:after {
            z-index: -101;
            
            
            
          }
        </style><noscript><style>
    .post-cover-image.gbi-205228265-3QH9ufy5JxrAwrde1Mmz3X:before {
      opacity: 1;
      background-image: url('/blog/static/46b0cc875e4869af0a26df58b895d49d/abd46/thumbnail.png');
    }</style></noscript></section><h1 class="post-title">[번역글] 파이썬 3.11에서의 새로운 기능들</h1><h3 class="post-sub-title">파이썬 3.11의 주요 특징들 살펴보기</h3><p class="post-meta"><span>2022년 11월 4일</span> — <span>Python<!-- -->, <!-- -->Translated</span></p><div class="toc toc-hidden"></div><div class="post-content"><p>이 글은 <a href="https://realpython.com/">Real Python 홈페이지</a>에 올라온 글인 <a href="https://realpython.com/python311-new-features/">Python 3.11: Cool New Features for You to Try</a>을 번역한 글로,
원글 작성자에게 허가를 받아 작성했습니다.</p><p>글 내용이 꽤 좋고, 저도 다시 번역하고 다듬으며 기억에 더 남기고 싶었네요.</p><p>원글은 꽤 긴데, 이 중 필요없겠다 싶은 부분은 과감히 덜어냈고, 추가로 설명하면 좋겠다할 부분은 직접 더 작성했습니다.
내용이 길더라도 하나도 빠짐없이 알아보고 싶으신 분은 원글을 읽어보시길 추천드립니다.</p><hr/><p>파이썬 3.11이 2022년 10월 24일에 출시되었습니다.
이 글에서는 파이썬 3.11에서의 가장 멋지고 영향력 있는 새로운 기능을 살펴보려고 합니다.
구체적으로는 다음과 기능들에 대해 알아봅니다.</p><ul><li>더 많은 정보를 제공하는 오류 메시지 (Informative tracebacks)</li><li>더 빠른 코드 실행 (Faster code execution)</li><li>비동기 코드 작업을 단순화하는 작업 및 예외 그룹 (Task and Exception groups)</li><li>파이썬의 정적 타이핑 지원을 개선하는 몇 가지 새로운 타이핑 기능 (Static typing support)</li><li>구성 파일 작업을 위한 기본 TOML 지원 (TOML Support)</li></ul><h2 id="더-많은-정보를-제공하는-오류-메시지" style="position:relative"><a href="#%EB%8D%94-%EB%A7%8E%EC%9D%80-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-%EC%98%A4%EB%A5%98-%EB%A9%94%EC%8B%9C%EC%A7%80" aria-label="더 많은 정보를 제공하는 오류 메시지 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>더 많은 정보를 제공하는 오류 메시지</h2><p>파이썬 3.11에서는 오류 메시지의 Traceback에 장식적 주석(Decorative annotations)이 추가되었습니다.
이를 통해 오류 메시지를 보다 신속하게 해석할 수 있습니다.</p><p>예시를 살펴봅시다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># inverse.py</span>

<span class="token keyword">def</span> <span class="token function">inverse</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> number

<span class="token keyword">print</span><span class="token punctuation">(</span>inverse<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div><p>위 코드는 1을 0으로 나누려고 하기 있기 때문에 에러를 발생시킵니다.</p><p>어떤 식으로 에러가 나오는지 확인해봅시다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python">$ python inverse<span class="token punctuation">.</span>py
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">&quot;/home/realpython/inverse.py&quot;</span><span class="token punctuation">,</span> line <span class="token number">6</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">print</span><span class="token punctuation">(</span>inverse<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">          <span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span></span>  File <span class="token string">&quot;/home/realpython/inverse.py&quot;</span><span class="token punctuation">,</span> line <span class="token number">4</span><span class="token punctuation">,</span> <span class="token keyword">in</span> inverse
<span class="gatsby-highlight-code-line">    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> number</span><span class="gatsby-highlight-code-line">           <span class="token operator">~</span><span class="token operator">~</span><span class="token operator">^</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span></span>ZeroDivisionError<span class="token punctuation">:</span> division by zero</code></pre></div><p><code class="language-text">^</code> 와 <code class="language-text">~</code> 기호가 Traceback에 포함되어 있습니다.
이 기호들은 에러가 코드 어디에서 발생했는지 알려줍니다.</p><blockquote><p><strong>* 역자가 추가하는 내용입니다</strong></p><p>파이썬 3.10에서는 Traceback 에 <code class="language-text">^</code>, <code class="language-text">~</code> 기호가 포함되어 있지 않습니다.
아래는 같은 코드를 3.10에서 실행시켰을 때의 모습입니다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ python inverse.py
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">&quot;/Users/user/Desktop/heumsi/repos/blog/content/posts/python311-new-features/inverse.py&quot;</span>, line <span class="token number">6</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    print<span class="token punctuation">(</span>inverse<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">))</span>
  File <span class="token string">&quot;/Users/user/Desktop/heumsi/repos/blog/content/posts/python311-new-features/inverse.py&quot;</span>, line <span class="token number">4</span>, <span class="token keyword">in</span> inverse
    <span class="token builtin class-name">return</span> <span class="token number">1</span> / number
ZeroDivisionError: division by zero</code></pre></div></blockquote><p>예시를 하나 더 봅시다.</p><p>다음처럼 <code class="language-text">KeyError</code> 예외가 발생하는 경우에도, 정확히 어디에서 예외가 발생했는지 장식적 주석을 통해 빠르게 알 수 있습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> programmers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">{</span><span class="token string">&#x27;name&#x27;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&#x27;first&#x27;</span><span class="token builtin class-name">:</span> <span class="token string">&#x27;Uncle Barry&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Person.from_dict<span class="token punctuation">(</span>programmers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">&quot;/home/realpython/programmers.py&quot;</span>, line <span class="token number">17</span>, <span class="token keyword">in</span> from_dict
<span class="gatsby-highlight-code-line">    <span class="token assign-left variable">name</span><span class="token operator">=</span>f<span class="token string">&quot;{info[&#x27;name&#x27;][&#x27;first&#x27;]} {info[&#x27;name&#x27;][&#x27;last&#x27;]}&quot;</span>,</span><span class="gatsby-highlight-code-line">                                    ~~~~~~~~~~~~^^^^^^^^</span>KeyError: <span class="token string">&#x27;last&#x27;</span></code></pre></div><h2 id="더-빠른-코드-실행" style="position:relative"><a href="#%EB%8D%94-%EB%B9%A0%EB%A5%B8-%EC%BD%94%EB%93%9C-%EC%8B%A4%ED%96%89" aria-label="더 빠른 코드 실행 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>더 빠른 코드 실행</h2><p><a href="https://docs.python.org/3.11/whatsnew/3.11.html#faster-cpython">파이썬 3.11은 3.10보다 평균적으로 25% 빨라졌습니다.</a>
어떻게 해서 더 빨라지게 했을까요?</p><p>주요 아이디어는 자주 수행되는 작업의 명령어를 최적화하여 실행 중인 코드의 속도를 높이는 것입니다.
<a href="https://en.wikipedia.org/wiki/Just-in-time_compilation">JIT(Just-In-Time)</a>과 비슷하지만, 파이썬에서 바이트 코드는 즉석에서 조정되거나 변경됩니다.</p><blockquote><p>파이썬 코드는 실행되기 전에 바이트 코드로 컴파일 됩니다.
바이트코드는 일반 파이썬 코드보다 더 기본적인 명령어로 구성되어 있습니다.</p><p>이 바이트 코드를 살펴보고 싶다면, 다음처럼 <code class="language-text">dis</code> 모듈을 사용할 수 있습니다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> def feet_to_meters<span class="token punctuation">(</span>feet<span class="token punctuation">)</span>:
<span class="token punctuation">..</span>.     <span class="token builtin class-name">return</span> <span class="token number">0.3048</span> * feet

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">import</span> dis
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dis.dis<span class="token punctuation">(</span>feet_to_meters<span class="token punctuation">)</span>
  <span class="token number">1</span>           <span class="token number">0</span> RESUME                   <span class="token number">0</span>

  <span class="token number">2</span>           <span class="token number">2</span> LOAD_CONST               <span class="token number">1</span> <span class="token punctuation">(</span><span class="token number">0.3048</span><span class="token punctuation">)</span>
              <span class="token number">4</span> LOAD_FAST                <span class="token number">0</span> <span class="token punctuation">(</span>feet<span class="token punctuation">)</span>
              <span class="token number">6</span> BINARY_OP                <span class="token number">5</span> <span class="token punctuation">(</span>*<span class="token punctuation">)</span>
             <span class="token number">10</span> RETURN_VALUE</code></pre></div><p>5개의 열은 행 번호, 바이트 주소, 작업 코드 이름, 작업 매개변수(매개변수 해석) 입니다.</p><p>일반적으로 Python을 작성하기 위해 바이트 코드에 대해 알 필요는 없습니다.
하지만 파이썬이 내부적으로 어떻게 작동하는지 이해하는 데 도움이 될 수 있습니다.</p></blockquote><p>파이썬 3.11에서는 바이트코드를 생성할 때 단축(quickening)이라는 단계가 새로 추가 되었습니다.
이 단계에서 런타임동안 최적화될 수 있는 명령은 적응형(adaptive) 명령으로 대체됩니다.
이것은 8번의 동일한 명령 호출 후에 발생합니다.</p><p><code class="language-text">dis</code> 모듈을 통해 직접 살펴봅시다.
다음처럼 <code class="language-text">feet_to_meters()</code> 함수를 7번 호출합니다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> def feet_to_meters<span class="token punctuation">(</span>feet<span class="token punctuation">)</span>:
<span class="token punctuation">..</span>.     <span class="token builtin class-name">return</span> <span class="token number">0.3048</span> * feet
<span class="token punctuation">..</span>.

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> feet_to_meters<span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span>
<span class="token number">0.33528</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> feet_to_meters<span class="token punctuation">(</span><span class="token number">2.2</span><span class="token punctuation">)</span>
<span class="token number">0.67056</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> feet_to_meters<span class="token punctuation">(</span><span class="token number">3.3</span><span class="token punctuation">)</span>
<span class="token number">1.00584</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> feet_to_meters<span class="token punctuation">(</span><span class="token number">4.4</span><span class="token punctuation">)</span>
<span class="token number">1.34112</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> feet_to_meters<span class="token punctuation">(</span><span class="token number">5.5</span><span class="token punctuation">)</span>
<span class="token number">1.6764000000000001</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> feet_to_meters<span class="token punctuation">(</span><span class="token number">6.6</span><span class="token punctuation">)</span>
<span class="token number">2.01168</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> feet_to_meters<span class="token punctuation">(</span><span class="token number">7.7</span><span class="token punctuation">)</span>
<span class="token number">2.34696</span></code></pre></div><p><code class="language-text">feet_to_meters()</code> 함수의 바이트코드를 살펴봅시다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> dis
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dis<span class="token punctuation">.</span>dis<span class="token punctuation">(</span>feet_to_meters<span class="token punctuation">,</span> adaptive<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
  <span class="token number">1</span>           <span class="token number">0</span> RESUME                   <span class="token number">0</span>

  <span class="token number">2</span>           <span class="token number">2</span> LOAD_CONST               <span class="token number">1</span> <span class="token punctuation">(</span><span class="token number">0.3048</span><span class="token punctuation">)</span>
              <span class="token number">4</span> LOAD_FAST                <span class="token number">0</span> <span class="token punctuation">(</span>feet<span class="token punctuation">)</span>
              <span class="token number">6</span> BINARY_OP                <span class="token number">5</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
             <span class="token number">10</span> RETURN_VALUE</code></pre></div><p>이 바이트코드는 <code class="language-text">feet_to_meters</code> 함수를 8번째 호출할 때 달라집니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> feet_to_meters<span class="token punctuation">(</span><span class="token number">8.8</span><span class="token punctuation">)</span>
<span class="token number">2.68224</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dis.dis<span class="token punctuation">(</span>feet_to_meters, <span class="token assign-left variable">adaptive</span><span class="token operator">=</span>True<span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">  <span class="token number">1</span>           <span class="token number">0</span> RESUME_QUICK                 <span class="token number">0</span></span>
<span class="gatsby-highlight-code-line">  <span class="token number">2</span>           <span class="token number">2</span> LOAD_CONST__LOAD_FAST        <span class="token number">1</span> <span class="token punctuation">(</span><span class="token number">0.3048</span><span class="token punctuation">)</span></span>              <span class="token number">4</span> LOAD_FAST                    <span class="token number">0</span> <span class="token punctuation">(</span>feet<span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">              <span class="token number">6</span> BINARY_OP_MULTIPLY_FLOAT     <span class="token number">5</span> <span class="token punctuation">(</span>*<span class="token punctuation">)</span></span>             <span class="token number">10</span> RETURN_VALUE</code></pre></div><p>원래 명령어 중 일부가 특화된 명령어로 대체되었습니다.
예를 들어, <code class="language-text">BINARY_OP</code> 명령어는 두 <code class="language-text">float</code> 값끼리 곱하는 것에 특화된 <code class="language-text">BINARY_OP_MULTIPLY_FLOAT</code> 명령으로 대체되었습니다.</p><p>만약 <code class="language-text">feet_to_meters()</code> 함수의 파라미터 값으로 <code class="language-text">float</code> 타입이 아닌 다른 유형의 타입이 들어오면, 원래의 바이트코드 명령어로 다시 원복됩니다.
이를 확인해봅시다.</p><p>이번엔 함수를 52번 더 호출하되, 이제 파라미터로 정수 타입 값을 넘깁니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">for</span> <span class="token for-or-select variable">feet</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">52</span><span class="token punctuation">)</span>:
<span class="token punctuation">..</span>.     feet_to_meters<span class="token punctuation">(</span>feet<span class="token punctuation">)</span>
<span class="token punctuation">..</span>.

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dis.dis<span class="token punctuation">(</span>feet_to_meters, <span class="token assign-left variable">adaptive</span><span class="token operator">=</span>True<span class="token punctuation">)</span>
  <span class="token number">1</span>           <span class="token number">0</span> RESUME_QUICK                 <span class="token number">0</span>

  <span class="token number">2</span>           <span class="token number">2</span> LOAD_CONST__LOAD_FAST        <span class="token number">1</span> <span class="token punctuation">(</span><span class="token number">0.3048</span><span class="token punctuation">)</span>
              <span class="token number">4</span> LOAD_FAST                    <span class="token number">0</span> <span class="token punctuation">(</span>feet<span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">              <span class="token number">6</span> BINARY_OP_MULTIPLY_FLOAT     <span class="token number">5</span> <span class="token punctuation">(</span>*<span class="token punctuation">)</span></span>             <span class="token number">10</span> RETURN_VALUE</code></pre></div><p>여전히 <code class="language-text">feet_to_meters()</code> 함수가 <code class="language-text">float</code> 타입 값끼리 곱할 수 있는 것에 최적화 되어 있습니다.
정수로 한 번 더 호출하면 <code class="language-text">feet_to_meters()</code> 는 특화되지 않은 적응형(adaptive) 명령어로 변환됩니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> feet_to_meters<span class="token punctuation">(</span><span class="token number">52</span><span class="token punctuation">)</span>
<span class="token number">15.8496</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dis.dis<span class="token punctuation">(</span>feet_to_meters, <span class="token assign-left variable">adaptive</span><span class="token operator">=</span>True<span class="token punctuation">)</span>
  <span class="token number">1</span>           <span class="token number">0</span> RESUME_QUICK              <span class="token number">0</span>

  <span class="token number">2</span>           <span class="token number">2</span> LOAD_CONST__LOAD_FAST     <span class="token number">1</span> <span class="token punctuation">(</span><span class="token number">0.3048</span><span class="token punctuation">)</span>
              <span class="token number">4</span> LOAD_FAST                 <span class="token number">0</span> <span class="token punctuation">(</span>feet<span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">              <span class="token number">6</span> BINARY_OP_ADAPTIVE        <span class="token number">5</span> <span class="token punctuation">(</span>*<span class="token punctuation">)</span></span>             <span class="token number">10</span> RETURN_VALUE</code></pre></div><p>이 경우 <code class="language-text">BINARY_OP_MULTIPLY_INT</code> 가 아니라 <code class="language-text">BINARY_OP_ADAPTIVE</code> 로 변한 이유는, <code class="language-text">feet_to_meters()</code> 함수 내부에 이미 float 값(<code class="language-text">0.3048</code>)이 곱해지기 때문입니다.
<code class="language-text">int</code> 타입과 <code class="language-text">float</code> 타입 값끼리 곱의 최적화는 꽤 어려워서, 현재로서 존재하는 특화된 명령어는 없습니다.</p><p>파이썬 3.11에서는 이런 방식으로 기존 코드를 최적화하고 있으며, 이는 <a href="https://docs.python.org/3.12/whatsnew/3.12.html">파이썬 3.12</a>에서도 지속될 예정입니다.</p><h2 id="작업-그룹-code-classlanguage-texttaskgroupcode" style="position:relative"><a href="#%EC%9E%91%EC%97%85-%EA%B7%B8%EB%A3%B9-code-classlanguage-texttaskgroupcode" aria-label="작업 그룹 code classlanguage texttaskgroupcode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>작업 그룹 (<code class="language-text">TaskGroup</code>)</h2><p>파이썬 3.11에서는 비동기 작업을 실행하고 모니터링하기 위한 더 깨끗한 <code class="language-text">TaskGroup</code> 구문을 사용할 수 있습니다.</p><p><code class="language-text">asyncio</code> 모듈로 여러 비동기 작업을 실행하는 전통적인 방법은 <code class="language-text">create_task()</code> 함수로 작업(Task)을 만든 뒤 <code class="language-text"> gather()</code> 함수로 이 작업을 기다리는 것이었습니다.
예를 들면 다음과 같습니다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">tasks <span class="token operator">=</span> <span class="token punctuation">[</span>asyncio<span class="token punctuation">.</span>create_task<span class="token punctuation">(</span>run_some_task<span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> param <span class="token keyword">in</span> params<span class="token punctuation">]</span>
<span class="token keyword">await</span> asyncio<span class="token punctuation">.</span>gather<span class="token punctuation">(</span><span class="token operator">*</span>tasks<span class="token punctuation">)</span></code></pre></div><p>파이썬 3.11에서는 <code class="language-text">TaskGroup</code> 구문을 이용하여 다음처럼 더 간단하게 작성할 수 있습니다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">async</span> <span class="token keyword">with</span> asyncio<span class="token punctuation">.</span>TaskGroup<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> tg<span class="token punctuation">:</span>
    <span class="token keyword">for</span> param <span class="token keyword">in</span> params<span class="token punctuation">:</span>
        tg<span class="token punctuation">.</span>create_task<span class="token punctuation">(</span>run_some_task<span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div><p><code class="language-text">TaskGroup</code> 구문을 사용하는 좀 더 실용적인 예제를 살펴봅시다.
PEP 문서로 부터 여러 파일을 다운로드해야 한다고 합시다.
코드는 다음과 같이 작성할 수 있습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> asyncio
<span class="token keyword">import</span> aiohttp

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">download_peps</span><span class="token punctuation">(</span>session<span class="token punctuation">,</span> peps<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">async</span> <span class="token keyword">with</span> asyncio<span class="token punctuation">.</span>TaskGroup<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> tg<span class="token punctuation">:</span></span><span class="gatsby-highlight-code-line">        <span class="token keyword">for</span> pep <span class="token keyword">in</span> peps<span class="token punctuation">:</span></span><span class="gatsby-highlight-code-line">            tg<span class="token punctuation">.</span>create_task<span class="token punctuation">(</span>download_pep<span class="token punctuation">(</span>session<span class="token punctuation">,</span> pep<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
PEP_URL <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;https://raw.githubusercontent.com/python/peps/master/pep-{pep:04d}.txt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>peps<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> aiohttp<span class="token punctuation">.</span>ClientSession<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> session<span class="token punctuation">:</span>
        <span class="token keyword">await</span> download_peps<span class="token punctuation">(</span>session<span class="token punctuation">,</span> peps<span class="token punctuation">)</span></code></pre></div><p>여러 비동기 작업으로 작업할 때 한 가지 문제는, 여러 개의 작업이 언제든지 오류를 일으킬 수 있다는 것입니다.
파이썬 3.11에는 여러 동시 오류를 추적하도록 설계된 <code class="language-text">ExceptionGroup</code> 이 도입되었는데, 이에 대해서는 뒤에서 더 알아보겠습니다.</p><h2 id="개선된-type-variable" style="position:relative"><a href="#%EA%B0%9C%EC%84%A0%EB%90%9C-type-variable" aria-label="개선된 type variable permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>개선된 Type Variable</h2><p>Python은 동적으로 Type이 지정된 언어이지만, Type Hinting을 통해 정적 유형을 선택적으로 지정할 수 있습니다.</p><p>파이썬 3.11에서는 Type과 관련된 5개의 PEP가 있었습니다.</p><ul><li><a href="https://peps.python.org/pep-0646">PEP 646</a>: Variadic generics</li><li><a href="https://peps.python.org/pep-0655">PEP 655</a>: Marking individual TypedDict items as required or potentially missing</li><li><a href="https://peps.python.org/pep-0673">PEP 673</a>: Self type</li><li><a href="https://peps.python.org/pep-0675">PEP 675</a>: Arbitrary literal string type</li><li><a href="https://peps.python.org/pep-0681">PEP 681</a>: Data class transforms</li></ul><p>여기서는 다음 두 개에 대해서 좀 더 집중적으로 다룹니다.</p><ul><li>Self type</li><li>Variadic generics</li></ul><h3 id="self-type" style="position:relative"><a href="#self-type" aria-label="self type permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Self type</h3><p>Type 변수는 처음부터 Python의 정적 유형 지정 시스템의 일부였습니다.
다음처럼 <code class="language-text">TypeVar</code> 를 사용하여 제네릭 타입을 매개변수화할 수 있습니다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Sequence<span class="token punctuation">,</span> TypeVar

T <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">&quot;T&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">first</span><span class="token punctuation">(</span>sequence<span class="token punctuation">:</span> Sequence<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> T<span class="token punctuation">:</span>
    <span class="token keyword">return</span> sequence<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></code></pre></div><p>또한 다음처럼 <code class="language-text">bound</code> 파라미터를 사용하여 특정 클래스와 서브 클래스를 지정할 수 있습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> dataclasses <span class="token keyword">import</span> dataclass
<span class="gatsby-highlight-code-line"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Any<span class="token punctuation">,</span> Type<span class="token punctuation">,</span> TypeVar</span>
<span class="gatsby-highlight-code-line">TPerson <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">&quot;TPerson&quot;</span><span class="token punctuation">,</span> bound<span class="token operator">=</span><span class="token string">&quot;Person&quot;</span><span class="token punctuation">)</span></span>
<span class="token decorator annotation punctuation">@dataclass</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">:</span>
    name<span class="token punctuation">:</span> <span class="token builtin">str</span>
    life_span<span class="token punctuation">:</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">]</span>

    <span class="token decorator annotation punctuation">@classmethod</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">def</span> <span class="token function">from_dict</span><span class="token punctuation">(</span>cls<span class="token punctuation">:</span> Type<span class="token punctuation">[</span>TPerson<span class="token punctuation">]</span><span class="token punctuation">,</span> info<span class="token punctuation">:</span> <span class="token builtin">dict</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> TPerson<span class="token punctuation">:</span></span>        <span class="token keyword">return</span> cls<span class="token punctuation">(</span>
            name<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>info<span class="token punctuation">[</span><span class="token string">&#x27;name&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#x27;first&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span>info<span class="token punctuation">[</span><span class="token string">&#x27;name&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#x27;last&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">,</span>
            life_span<span class="token operator">=</span><span class="token punctuation">(</span>info<span class="token punctuation">[</span><span class="token string">&quot;birth&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;year&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> info<span class="token punctuation">[</span><span class="token string">&quot;death&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;year&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span></code></pre></div><p>그러나 이는 가독성이 좋아보이지는 않습니다.</p><p>파이썬 3.11에서는 일부 상황에서 다음처럼 <code class="language-text">TypeVar</code> 대신 <code class="language-text">Self</code> 를 사용할 수 있습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="gatsby-highlight-code-line"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Any<span class="token punctuation">,</span> Self</span>
<span class="token decorator annotation punctuation">@dataclass</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">:</span>
    name<span class="token punctuation">:</span> <span class="token builtin">str</span>
    life_span<span class="token punctuation">:</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">]</span>

    <span class="token decorator annotation punctuation">@classmethod</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">def</span> <span class="token function">from_dict</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> info<span class="token punctuation">:</span> <span class="token builtin">dict</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Self<span class="token punctuation">:</span></span>        <span class="token keyword">return</span> cls<span class="token punctuation">(</span>
            name<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>info<span class="token punctuation">[</span><span class="token string">&#x27;name&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#x27;first&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span>info<span class="token punctuation">[</span><span class="token string">&#x27;name&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#x27;last&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">,</span>
            life_span<span class="token operator">=</span><span class="token punctuation">(</span>info<span class="token punctuation">[</span><span class="token string">&quot;birth&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;year&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> info<span class="token punctuation">[</span><span class="token string">&quot;death&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;year&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span></code></pre></div><p>이제 클래스에서 자신을 가르키는 경우, <code class="language-text">TypeVar</code> 로 Type 변수를 별도로 만들어서 쓰지 않아도 됩니다.</p><h3 id="variadic-generics" style="position:relative"><a href="#variadic-generics" aria-label="variadic generics permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Variadic generics</h3><p><code class="language-text">TypeVar</code> 의 한 가지 제한 사항은 한 번에 한 Type만 사용할 수 있다는 것입니다.</p><p>예를 들어, 요소가 2개인 튜플의 순서를 뒤집는 함수가 다음처럼 있다고 해봅시다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> TypeVar

<span class="gatsby-highlight-code-line">T0 <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">&quot;T0&quot;</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">T1 <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">&quot;T1&quot;</span><span class="token punctuation">)</span></span>
<span class="gatsby-highlight-code-line"><span class="token keyword">def</span> <span class="token function">flip</span><span class="token punctuation">(</span>pair<span class="token punctuation">:</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span>T0<span class="token punctuation">,</span> T1<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span>T1<span class="token punctuation">,</span> T0<span class="token punctuation">]</span><span class="token punctuation">:</span></span>    first<span class="token punctuation">,</span> second <span class="token operator">=</span> pair
    <span class="token keyword">return</span> <span class="token punctuation">(</span>second<span class="token punctuation">,</span> first<span class="token punctuation">)</span></code></pre></div><p>쓰기가 좀 번거롭긴 하지만 그래도 아직까진 괜찮습니다.
하지만 다음과 같이 튜플 내에 여러 개의 아이템을 가지는 변수가 담겨있을 때 문제가 발생합니다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">cycle</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">:</span>
    first<span class="token punctuation">,</span> <span class="token operator">*</span>rest <span class="token operator">=</span> elements
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">*</span>rest<span class="token punctuation">,</span> first<span class="token punctuation">)</span></code></pre></div><p><code class="language-text">rest</code> 가 몇 개의 아이템을 가지고 있는지 알 수 없어서, 이를 Type 변수로 표현하기가 어렵습니다.
만약 n개의 아이템을 가지고 있다고 한다면, n 개의 <code class="language-text">TypeVar</code> 변수를 정의해야하는데, 이 또한 번거롭습니다.</p><p>파이썬 3.11에서는 이 문제를 해결하기 위해 <code class="language-text">TypeVarTuple</code> 가 도입되었습니다.
다음처럼 <code class="language-text">TypeVarTuple</code> 를 통해 임의의 수의 <code class="language-text">TypeVar</code> 를 대신할 수 있습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="gatsby-highlight-code-line"><span class="token keyword">from</span> typing <span class="token keyword">import</span> TypeVar<span class="token punctuation">,</span> TypeVarTuple</span>
<span class="gatsby-highlight-code-line">T0 <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">&quot;T0&quot;</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">Ts <span class="token operator">=</span> TypeVarTuple<span class="token punctuation">(</span><span class="token string">&quot;Ts&quot;</span><span class="token punctuation">)</span></span>
<span class="gatsby-highlight-code-line"><span class="token keyword">def</span> <span class="token function">cycle</span><span class="token punctuation">(</span>elements<span class="token punctuation">:</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span>T0<span class="token punctuation">,</span> <span class="token operator">*</span>Ts<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span><span class="token operator">*</span>Ts<span class="token punctuation">,</span> T0<span class="token punctuation">]</span><span class="token punctuation">:</span></span>    first<span class="token punctuation">,</span> <span class="token operator">*</span>rest <span class="token operator">=</span> elements
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">*</span>rest<span class="token punctuation">,</span> first<span class="token punctuation">)</span></code></pre></div><p><code class="language-text">TypeVarTuple</code> 를 쓰는 경우 앞에 <code class="language-text">*</code> 는 필수로 들어가야합니다.
이 의미는 일반적으로 많이 쓰이는 <code class="language-text">*args</code> 처럼, unpack 문법을 떠올리면 쉽습니다.</p><blockquote><p>파이썬 3.10 에서도 <a href="https://pypi.org/project/typing-extensions">typing_extensions</a> 라이브러리를 설치한 뒤, 다음처럼 위 두 기능을 포함한 Typing 모듈의 새 기능들을 사용할 수 있습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="gatsby-highlight-code-line"><span class="token keyword">from</span> typing_extensions <span class="token keyword">import</span> TypeVar<span class="token punctuation">,</span> TypeVarTuple<span class="token punctuation">,</span> Unpack</span>
T0 <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">&quot;T0&quot;</span><span class="token punctuation">)</span>
Ts <span class="token operator">=</span> TypeVarTuple<span class="token punctuation">(</span><span class="token string">&quot;Ts&quot;</span><span class="token punctuation">)</span>

<span class="gatsby-highlight-code-line"><span class="token keyword">def</span> <span class="token function">cycle</span><span class="token punctuation">(</span>elements<span class="token punctuation">:</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span>T0<span class="token punctuation">,</span> Unpack<span class="token punctuation">[</span>Ts<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span>Unpack<span class="token punctuation">[</span>Ts<span class="token punctuation">]</span><span class="token punctuation">,</span> T0<span class="token punctuation">]</span><span class="token punctuation">:</span></span>    first<span class="token punctuation">,</span> <span class="token operator">*</span>rest <span class="token operator">=</span> elements
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">*</span>rest<span class="token punctuation">,</span> first<span class="token punctuation">)</span></code></pre></div><p>단, <code class="language-text">*Ts</code> 문법은 3.11에서만 가능합니다.
이전 버전에서는 <code class="language-text">Unpack[Ts]</code> 와 같이 사용해야 합니다.</p></blockquote><h2 id="구성-파일-작업을-위한-기본-toml-지원" style="position:relative"><a href="#%EA%B5%AC%EC%84%B1-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%97%85%EC%9D%84-%EC%9C%84%ED%95%9C-%EA%B8%B0%EB%B3%B8-toml-%EC%A7%80%EC%9B%90" aria-label="구성 파일 작업을 위한 기본 toml 지원 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>구성 파일 작업을 위한 기본 TOML 지원</h2><p>TOML은 Tom&#x27;s Obvious Minimal Language의 줄임말로, 지난 10년 동안 인기를 얻은 Configuration 파일 형식입니다.
파이썬 커뮤니티 역시 패키지 및 프로젝트에 대한 메타데이터를 지정할 때, TOML을 사용했습니다.</p><blockquote><p>만약 TOML이 낯설다면, <a href="https://realpython.com/python311-new-features/#improved-type-variables">파이썬 및 TOML: New Best Friends</a>에서 자세히 배우실 수 있습니다.</p></blockquote><p>TOML은 다양한 도구에서 수년 동안 사용되어 왔지만, Python에는 내장된 TOML 지원이 없었습니다.
이제 파이썬 3.11에서는 <a href="https://docs.python.org/3.11/library/tomllib.html">tomllib</a>이 표준 라이브러리 추가되었습니다.
이제 이 패키지를 통해 TOML 파일을 구문 분석할 수 있습니다.</p><p>예를 들어 다음과 같은 TOML 파일이 있다고 합시다.</p><div class="gatsby-highlight" data-language="toml"><pre class="language-toml"><code class="language-toml"><span class="token comment"># units.toml</span>

<span class="token punctuation">[</span><span class="token table class-name">second</span><span class="token punctuation">]</span>
<span class="token key property">label</span>   <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">singular</span> <span class="token punctuation">=</span> <span class="token string">&quot;second&quot;</span><span class="token punctuation">,</span> <span class="token key property">plural</span> <span class="token punctuation">=</span> <span class="token string">&quot;seconds&quot;</span> <span class="token punctuation">}</span>
<span class="token key property">aliases</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;seconds&quot;</span><span class="token punctuation">]</span>

<span class="token punctuation">[</span><span class="token table class-name">minute</span><span class="token punctuation">]</span>
<span class="token key property">label</span>      <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">singular</span> <span class="token punctuation">=</span> <span class="token string">&quot;minute&quot;</span><span class="token punctuation">,</span> <span class="token key property">plural</span> <span class="token punctuation">=</span> <span class="token string">&quot;minutes&quot;</span> <span class="token punctuation">}</span>
<span class="token key property">aliases</span>    <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;min&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;minutes&quot;</span><span class="token punctuation">]</span>
<span class="token key property">multiplier</span> <span class="token punctuation">=</span> <span class="token number">60</span>
<span class="token key property">to_unit</span>    <span class="token punctuation">=</span> <span class="token string">&quot;second&quot;</span></code></pre></div><p>이 파일은 다음과 같이 <code class="language-text">tomllib.load()</code> 함수를 통해 읽어올 수 있습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="gatsby-highlight-code-line"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> tomllib</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;units.toml&quot;</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">&quot;rb&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
<span class="gatsby-highlight-code-line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     units <span class="token operator">=</span> tomllib<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> units
<span class="token punctuation">{</span><span class="token string">&#x27;second&#x27;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&#x27;label&#x27;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&#x27;singular&#x27;</span><span class="token punctuation">:</span> <span class="token string">&#x27;second&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;plural&#x27;</span><span class="token punctuation">:</span> <span class="token string">&#x27;seconds&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></div><p>또는 다음처럼 <code class="language-text">tomllib.loads()</code> 함수를 통해 읽어올 수도 있습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="gatsby-highlight-code-line"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> tomllib</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> pathlib
<span class="gatsby-highlight-code-line"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> units <span class="token operator">=</span> tomllib<span class="token punctuation">.</span>loads<span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     pathlib<span class="token punctuation">.</span>Path<span class="token punctuation">(</span><span class="token string">&quot;units.toml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read_text<span class="token punctuation">(</span>encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span></span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> units
<span class="token punctuation">{</span><span class="token string">&#x27;second&#x27;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&#x27;label&#x27;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&#x27;singular&#x27;</span><span class="token punctuation">:</span> <span class="token string">&#x27;second&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;plural&#x27;</span><span class="token punctuation">:</span> <span class="token string">&#x27;seconds&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></div><blockquote><p>tomllib은 <a href="https://pypi.org/project/tomli/">tomli</a> 라이브러리를 기반으로 하고 있기 때문에, 파이썬 3.11 이전 버전에서는 tomli 라이브러리를 설치하여 위 기능들을 사용할 수 있습니다.
추후 버전 업데이트를 고려하여 다음과 같이 작성하면 될 것입니다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> tomllib
<span class="token keyword">except</span> ModuleNotFoundError<span class="token punctuation">:</span>
    <span class="token keyword">import</span> tomli <span class="token keyword">as</span> tomllib</code></pre></div></blockquote><h2 id="기타-멋진-기능들" style="position:relative"><a href="#%EA%B8%B0%ED%83%80-%EB%A9%8B%EC%A7%84-%EA%B8%B0%EB%8A%A5%EB%93%A4" aria-label="기타 멋진 기능들 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>기타 멋진 기능들</h2><p>지금까지 파이썬 3.11의 가장 큰 변경 사항과 개선 사항에 대해 배웠습니다.
그러나 탐색할 기능이 더 많이 있습니다.
이 섹션에서는 헤드라인 아래에 숨어 있을 수 있는 몇 가지 새로운 기능을 살펴보겠습니다.</p><h3 id="더-빠른-시작-시간" style="position:relative"><a href="#%EB%8D%94-%EB%B9%A0%EB%A5%B8-%EC%8B%9C%EC%9E%91-%EC%8B%9C%EA%B0%84" aria-label="더 빠른 시작 시간 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>더 빠른 시작 시간</h3><p>파이썬 스크립트를 실행할 때 인터프리터가 초기화될 때 몇 가지 일이 발생합니다.
이로 인해 가장 간단한 프로그램도 실행하는 데 몇 밀리초가 걸립니다.</p><p>파이썬 3.11은 모듈을 가져오는 작업 속도의 개선으로, 이전보다 더 빠르게 프로그램을 실행합니다.</p><p>얼마나 개선되었는지 확인하기 위해, 구체적인 예시를 하나 살펴봅시다.
다음과 같은 프로그램이 있다고 합시다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># snakesay.py</span>
<span class="token keyword">import</span> sys

message <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
bubble_length <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>
    <span class="token string-interpolation"><span class="token string">rf&quot;&quot;&quot;
       </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token string">&quot;_&quot;</span> <span class="token operator">*</span> bubble_length<span class="token punctuation">}</span></span><span class="token string">
      ( </span><span class="token interpolation"><span class="token punctuation">{</span>message<span class="token punctuation">}</span></span><span class="token string"> )
       </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token string">&quot;‾&quot;</span> <span class="token operator">*</span> bubble_length<span class="token punctuation">}</span></span><span class="token string">
        \
         \    __
          \  [oo]
             (__)\
               λ \\
                 _\\__
                (_____)_
               (________)Oo°&quot;&quot;&quot;</span></span>
<span class="token punctuation">)</span></code></pre></div><p>이 프로그램을 파이썬 인터프리터로 실행할 때, 다음처럼 <code class="language-text">-X importtime</code> 옵션을 주어 모듈을 가져오는데 소요되는 시간을 측정할 수 있습니다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ python -X importtime -S snakesay.py Imports are faster<span class="token operator">!</span>
<span class="token function">import</span> time: self <span class="token punctuation">[</span>us<span class="token punctuation">]</span> <span class="token operator">|</span> cumulative <span class="token operator">|</span> imported package
<span class="token function">import</span> time:       <span class="token number">283</span> <span class="token operator">|</span>        <span class="token number">283</span> <span class="token operator">|</span>   _io
<span class="token function">import</span> time:        <span class="token number">56</span> <span class="token operator">|</span>         <span class="token number">56</span> <span class="token operator">|</span>   marshal
<span class="token function">import</span> time:       <span class="token number">647</span> <span class="token operator">|</span>        <span class="token number">647</span> <span class="token operator">|</span>   posix
<span class="token function">import</span> time:       <span class="token number">587</span> <span class="token operator">|</span>       <span class="token number">1573</span> <span class="token operator">|</span> _frozen_importlib_external
<span class="token function">import</span> time:       <span class="token number">167</span> <span class="token operator">|</span>        <span class="token number">167</span> <span class="token operator">|</span>   <span class="token function">time</span>
<span class="token function">import</span> time:       <span class="token number">191</span> <span class="token operator">|</span>        <span class="token number">358</span> <span class="token operator">|</span> zipimport
<span class="token function">import</span> time:        <span class="token number">90</span> <span class="token operator">|</span>         <span class="token number">90</span> <span class="token operator">|</span>     _codecs
<span class="token function">import</span> time:       <span class="token number">561</span> <span class="token operator">|</span>        <span class="token number">651</span> <span class="token operator">|</span>   codecs
<span class="token function">import</span> time:       <span class="token number">825</span> <span class="token operator">|</span>        <span class="token number">825</span> <span class="token operator">|</span>   encodings.aliases
<span class="token function">import</span> time:      <span class="token number">1136</span> <span class="token operator">|</span>       <span class="token number">2611</span> <span class="token operator">|</span> encodings
<span class="token function">import</span> time:       <span class="token number">417</span> <span class="token operator">|</span>        <span class="token number">417</span> <span class="token operator">|</span> encodings.utf_8
<span class="token function">import</span> time:       <span class="token number">174</span> <span class="token operator">|</span>        <span class="token number">174</span> <span class="token operator">|</span> _signal
<span class="token function">import</span> time:        <span class="token number">56</span> <span class="token operator">|</span>         <span class="token number">56</span> <span class="token operator">|</span>     _abc
<span class="token function">import</span> time:       <span class="token number">251</span> <span class="token operator">|</span>        <span class="token number">306</span> <span class="token operator">|</span>   abc
<span class="token function">import</span> time:       <span class="token number">310</span> <span class="token operator">|</span>        <span class="token number">616</span> <span class="token operator">|</span> io
       _____________________
      <span class="token punctuation">(</span> Imports are faster<span class="token operator">!</span> <span class="token punctuation">)</span>
       ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾
        <span class="token punctuation">\</span>
         <span class="token punctuation">\</span>    __
          <span class="token punctuation">\</span>  <span class="token punctuation">[</span>oo<span class="token punctuation">]</span>
             <span class="token punctuation">(</span>__<span class="token punctuation">)</span><span class="token punctuation">\</span>
               λ <span class="token punctuation">\</span><span class="token punctuation">\</span>
                 _<span class="token punctuation">\</span><span class="token punctuation">\</span>__
                <span class="token punctuation">(</span>_____<span class="token punctuation">)</span>_
               <span class="token punctuation">(</span>________<span class="token punctuation">)</span>Oo°</code></pre></div><p>표의 숫자는 마이크로초 단위로 측정된 값입니다.</p><p>위에서 모듈을 가져오는데 걸리는 시간을 파이썬 3.10과 비교하면 다음과 같습니다.</p><table><thead><tr><th>모듈</th><th>파이썬 3.11</th><th>파이썬 3.10</th><th>빨라진 속도</th></tr></thead><tbody><tr><td><code class="language-text">_frozen_importlib_external</code></td><td>1573</td><td>2255</td><td>1.43배</td></tr><tr><td><code class="language-text">zipimport</code></td><td>358</td><td>558</td><td>1.56배</td></tr><tr><td><code class="language-text">encodings</code></td><td>2611</td><td>3009</td><td>1.15배</td></tr><tr><td><code class="language-text">encodings.utf_8</code></td><td>417</td><td>409</td><td>0.98배</td></tr><tr><td><code class="language-text">_signal</code></td><td>174</td><td>173</td><td>0.99배</td></tr><tr><td><code class="language-text">io</code></td><td>616</td><td>1216</td><td>1.97배</td></tr><tr><td><strong>총</strong></td><td><strong>5749</strong></td><td><strong>7620</strong></td><td><strong>1.33배</strong></td></tr></tbody></table><p>속도가 향상된 한 가지 큰 이유는 &quot;캐시된&quot; 바이트 코드가 저장되고 읽는 방법이 바뀌었기 때문입니다.</p><p>파이썬 인터프리터는 모듈을 실행할 때 소스 코드를 바이트 코드로 먼저 컴파일합니다.
파이썬 3.10에서 파이썬 모듈 실행 과정은 다음과 같았습니다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Read __pycache__ -&gt; Unmarshal -&gt; Heap allocated code object -&gt; Evaluate</code></pre></div><p>파이썬 3.11에서 파이썬 시작에 필수적인 핵심 모듈은 &quot;고정&quot;되었습니다.
이는 코드 개체(및 바이트 코드)가 인터프리터에 의해 정적으로 할당됨을 의미합니다.
이렇게 하면 모듈 실행 프로세스의 단계가 다음과 같이 줄어듭니다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Statically allocated code object -&gt; Evaluate</code></pre></div><p>이제 파이썬 3.11에서 인터프리터 시작이 10-15% 빨라졌습니다.
이 결과는 단기 실행 프로그램에 큰 영향을 미칩니다.</p><h3 id="비용-없는-예외" style="position:relative"><a href="#%EB%B9%84%EC%9A%A9-%EC%97%86%EB%8A%94-%EC%98%88%EC%99%B8" aria-label="비용 없는 예외 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>비용 없는 예외</h3><p>파이썬 3.11에서 예외 객체와 예외 핸들링 명령어들은 가벼워졌고,
<code class="language-text">try ... except</code> 블럭에서 <code class="language-text">except</code> 문이 실행되지 않는 한 작은 오버헤드만 존재합니다.</p><p>예를 들어, 다음과 같은 예외 처리가 포함된 프로그램이 있다고 해봅시다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">inverse</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">try</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> number
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>         <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;0 has no inverse&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre></div><p><code class="language-text">inverse()</code> 함수를 <code class="language-text">dis</code> 모듈을 통해 내부 명령어를 확인해보면 다음과 같습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> dis
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dis<span class="token punctuation">.</span>dis<span class="token punctuation">(</span>inverse<span class="token punctuation">)</span>
  <span class="token number">1</span>           <span class="token number">0</span> RESUME                   <span class="token number">0</span>

<span class="gatsby-highlight-code-line">  <span class="token number">2</span>           <span class="token number">2</span> NOP</span>
  <span class="token number">3</span>           <span class="token number">4</span> LOAD_CONST               <span class="token number">1</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
              <span class="token number">6</span> LOAD_FAST                <span class="token number">0</span> <span class="token punctuation">(</span>number<span class="token punctuation">)</span>
              <span class="token number">8</span> BINARY_OP               <span class="token number">11</span> <span class="token punctuation">(</span><span class="token operator">/</span><span class="token punctuation">)</span>
             <span class="token number">12</span> RETURN_VALUE
        <span class="token operator">&gt;&gt;</span>   <span class="token number">14</span> PUSH_EXC_INFO

  <span class="token number">4</span>          <span class="token number">16</span> LOAD_GLOBAL              <span class="token number">0</span> <span class="token punctuation">(</span>ZeroDivisionError<span class="token punctuation">)</span>
             <span class="token number">28</span> CHECK_EXC_MATCH
             <span class="token number">30</span> POP_JUMP_FORWARD_IF_FALSE    <span class="token number">19</span> <span class="token punctuation">(</span>to <span class="token number">70</span><span class="token punctuation">)</span>
             <span class="token number">32</span> POP_TOP

  <span class="token number">5</span>          <span class="token number">34</span> LOAD_GLOBAL              <span class="token number">3</span> <span class="token punctuation">(</span>NULL <span class="token operator">+</span> <span class="token keyword">print</span><span class="token punctuation">)</span>
             <span class="token number">46</span> LOAD_CONST               <span class="token number">2</span> <span class="token punctuation">(</span><span class="token string">&#x27;0 has no inverse&#x27;</span><span class="token punctuation">)</span>
             <span class="token number">48</span> PRECALL                  <span class="token number">1</span>
             <span class="token number">52</span> CALL                     <span class="token number">1</span>
             <span class="token number">62</span> POP_TOP
             <span class="token number">64</span> POP_EXCEPT
             <span class="token number">66</span> LOAD_CONST               <span class="token number">0</span> <span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">)</span>
             <span class="token number">68</span> RETURN_VALUE

  <span class="token number">4</span>     <span class="token operator">&gt;&gt;</span>   <span class="token number">70</span> RERAISE                  <span class="token number">0</span>
        <span class="token operator">&gt;&gt;</span>   <span class="token number">72</span> COPY                     <span class="token number">3</span>
             <span class="token number">74</span> POP_EXCEPT
             <span class="token number">76</span> RERAISE                  <span class="token number">1</span>
<span class="gatsby-highlight-code-line">ExceptionTable<span class="token punctuation">:</span></span><span class="gatsby-highlight-code-line">  <span class="token number">4</span> to <span class="token number">10</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">14</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span><span class="gatsby-highlight-code-line">  <span class="token number">14</span> to <span class="token number">62</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">72</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> lasti</span><span class="gatsby-highlight-code-line">  <span class="token number">70</span> to <span class="token number">70</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">72</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> lasti</span></code></pre></div><p>주목할 점은 <code class="language-text">inverse</code> 함수 2번째 줄의 <code class="language-text">try</code> 가 <a href="https://docs.python.org/3/library/dis.html#opcode-NOP"><code class="language-text">NOP</code></a> 명령어로 바뀌었다는 것입니다.
이 명령어는 아무것도 수행하지 않습니다.</p><p>한편 맨 마지막에는 <code class="language-text">ExceptionTable</code> 이 별도로 존재합니다.
이 테이블은 예외 발생 시 어느 코드 라인로 인터프리터를 점프해야하는지에 대한 정보를 담고있습니다.</p><p>이는 파이썬 3.10 및 이전 버전에서의 예외 처리와 차이가 있습니다.
예를 들어, <code class="language-text">try</code> 는 기존에는 <a href="https://docs.python.org/3.10/library/dis.html#opcode-SETUP_FINALLY"><code class="language-text">SETUP_FINALLY</code></a> 명령어로 되어있었고,
이 명령어는 첫번째 예외 블럭에 대한 포인터를 포함했습니다.
이를 별도로 <code class="language-text">ExceptionTable</code> 로 대체한 것은 예외가 일어나지 않을 때, <code class="language-text">try</code> 문을 좀 더 가볍게 만듭니다.</p><p>이와 같은 비용 없는 예외는 일반적으로 <code class="language-text">try ... catch</code> 문을 많이 사용하는 <a href="https://realpython.com/python-lbyl-vs-eafp/">EAFP(Easier-to-Ask-Forgiveness-than-Permission) 스타일</a>과 잘 맞습니다.</p><blockquote><p><strong>* 역자가 추가하는 내용입니다</strong></p><p>파이썬 3.10에서 똑같이 <code class="language-text">dis</code> 로 <code class="language-text">inverse</code> 함수를 확인해보면 다음과 같습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dis<span class="token punctuation">.</span>dis<span class="token punctuation">(</span>inverse<span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>   <span class="token number">2</span>           <span class="token number">0</span> SETUP_FINALLY            <span class="token number">5</span> <span class="token punctuation">(</span>to <span class="token number">12</span><span class="token punctuation">)</span></span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>   <span class="token number">3</span>           <span class="token number">2</span> LOAD_CONST               <span class="token number">1</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>               <span class="token number">4</span> LOAD_FAST                <span class="token number">0</span> <span class="token punctuation">(</span>number<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>               <span class="token number">6</span> BINARY_TRUE_DIVIDE
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>               <span class="token number">8</span> POP_BLOCK
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">10</span> RETURN_VALUE
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>   <span class="token number">4</span>     <span class="token operator">&gt;&gt;</span>   <span class="token number">12</span> DUP_TOP
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">14</span> LOAD_GLOBAL              <span class="token number">0</span> <span class="token punctuation">(</span>ZeroDivisionError<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">16</span> JUMP_IF_NOT_EXC_MATCH    <span class="token number">19</span> <span class="token punctuation">(</span>to <span class="token number">38</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">18</span> POP_TOP
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">20</span> POP_TOP
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">22</span> POP_TOP
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>   <span class="token number">5</span>          <span class="token number">24</span> LOAD_GLOBAL              <span class="token number">1</span> <span class="token punctuation">(</span><span class="token keyword">print</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">26</span> LOAD_CONST               <span class="token number">2</span> <span class="token punctuation">(</span><span class="token string">&#x27;error&#x27;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">28</span> CALL_FUNCTION            <span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">30</span> POP_TOP
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">32</span> POP_EXCEPT
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">34</span> LOAD_CONST               <span class="token number">0</span> <span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>              <span class="token number">36</span> RETURN_VALUE
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>   <span class="token number">4</span>     <span class="token operator">&gt;&gt;</span>   <span class="token number">38</span> RERAISE                  <span class="token number">0</span></code></pre></div><p><code class="language-text">try</code> 문은 <code class="language-text">NOP</code> 이 아닌 <code class="language-text">SETUP_FINALLY</code> 명령어로 되어있고, <code class="language-text">ExceptionTable</code> 도 없습니다.</p></blockquote><h3 id="예외-그룹-code-classlanguage-textexceptiongroupcode" style="position:relative"><a href="#%EC%98%88%EC%99%B8-%EA%B7%B8%EB%A3%B9-code-classlanguage-textexceptiongroupcode" aria-label="예외 그룹 code classlanguage textexceptiongroupcode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>예외 그룹 (<code class="language-text">ExceptionGroup</code>)</h3><p>우리는 위에서 <code class="language-text">TaskGroup</code> 을 배웠습니다.
이 때 <code class="language-text">ExceptionGroup</code> 으로 한 번에 여러 오류를 처리할 수 있다고 언급했습니다.</p><p>이제 <code class="language-text">ExceptionGroup</code> 에 대해서 알아봅시다.
<code class="language-text">ExceptionGroup</code> 은 다른 여러 예외를 하나로 래핑해줍니다.
예를 들면 다음처럼 <code class="language-text">ExceptionGroup</code> 을 만들 수 있습니다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> ExceptionGroup<span class="token punctuation">(</span><span class="token string">&quot;twice&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>TypeError<span class="token punctuation">(</span><span class="token string">&quot;int&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ValueError<span class="token punctuation">(</span><span class="token number">654</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ExceptionGroup<span class="token punctuation">(</span><span class="token string">&#x27;twice&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>TypeError<span class="token punctuation">(</span><span class="token string">&#x27;int&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ValueError<span class="token punctuation">(</span><span class="token number">654</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre></div><p><code class="language-text">&quot;twice&quot;</code> 라고 하는 <code class="language-text">ExceptionGroup</code> 은 <code class="language-text">TypeError</code> 과 <code class="language-text">ValueError</code> 을 래핑합니다.</p><p>이 <code class="language-text">ExceptionGroup</code> 을 <code class="language-text">raise</code> 하면 다음과 같은 결과가 나옵니다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">raise</span> ExceptionGroup<span class="token punctuation">(</span><span class="token string">&quot;twice&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>TypeError<span class="token punctuation">(</span><span class="token string">&quot;int&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ValueError<span class="token punctuation">(</span><span class="token number">654</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token operator">+</span> Exception Group Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token operator">|</span>   File <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
  <span class="token operator">|</span> ExceptionGroup<span class="token punctuation">:</span> twice <span class="token punctuation">(</span><span class="token number">2</span> sub<span class="token operator">-</span>exceptions<span class="token punctuation">)</span>
  <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
    <span class="token operator">|</span> TypeError<span class="token punctuation">:</span> <span class="token builtin">int</span>
    <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
    <span class="token operator">|</span> ValueError<span class="token punctuation">:</span> <span class="token number">654</span>
    <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span></code></pre></div><p>이 오류 메시지는 두 개의 하위 예외 <code class="language-text">TypeError</code> 과 <code class="language-text">ValueError</code> 도 출력해줍니다.</p><p><code class="language-text">ExceptionGroup</code> 으로 두 예외를 래핑했지만, 다시 개별로 처리하고 싶은 경우 다음처럼 <code class="language-text">except*</code> 문을 활용하면 됩니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">try</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">raise</span> ExceptionGroup<span class="token punctuation">(</span><span class="token string">&quot;twice&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>TypeError<span class="token punctuation">(</span><span class="token string">&quot;int&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ValueError<span class="token punctuation">(</span><span class="token number">654</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">except</span><span class="token operator">*</span> ValueError <span class="token keyword">as</span> err<span class="token punctuation">:</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;handling ValueError: </span><span class="token interpolation"><span class="token punctuation">{</span>err<span class="token punctuation">.</span>exceptions<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">except</span><span class="token operator">*</span> TypeError <span class="token keyword">as</span> err<span class="token punctuation">:</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;handling TypeError: </span><span class="token interpolation"><span class="token punctuation">{</span>err<span class="token punctuation">.</span>exceptions<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
handling ValueError<span class="token punctuation">:</span> <span class="token punctuation">(</span>ValueError<span class="token punctuation">(</span><span class="token number">654</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span>
handling TypeError<span class="token punctuation">:</span> <span class="token punctuation">(</span>TypeError<span class="token punctuation">(</span><span class="token string">&#x27;int&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span></code></pre></div><p>위처럼 일반 <code class="language-text">except</code> 문과 달리 여러 <code class="language-text">except*</code> 문이 실행될 수 있습니다.</p><p><code class="language-text">except*</code> 문으로 별도로 핸들링하지 않으면 다음처럼 핸들링하지 않은 예외만 오류 메시지에 출력됩니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">try</span><span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">raise</span> ExceptionGroup<span class="token punctuation">(</span><span class="token string">&quot;twice&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>TypeError<span class="token punctuation">(</span><span class="token string">&quot;int&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ValueError<span class="token punctuation">(</span><span class="token number">654</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">except</span><span class="token operator">*</span> ValueError <span class="token keyword">as</span> err<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;handling ValueError: </span><span class="token interpolation"><span class="token punctuation">{</span>err<span class="token punctuation">.</span>exceptions<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
handling ValueError<span class="token punctuation">:</span> <span class="token punctuation">(</span>ValueError<span class="token punctuation">(</span><span class="token number">654</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">  <span class="token operator">+</span> Exception Group Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span></span><span class="gatsby-highlight-code-line">  <span class="token operator">|</span>   File <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">,</span> line <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span></span><span class="gatsby-highlight-code-line">  <span class="token operator">|</span> ExceptionGroup<span class="token punctuation">:</span> twice <span class="token punctuation">(</span><span class="token number">1</span> sub<span class="token operator">-</span>exception<span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">  <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">|</span> TypeError<span class="token punctuation">:</span> <span class="token builtin">int</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">+</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span></span></code></pre></div><p><code class="language-text">ExceptionGroup</code> 와 <code class="language-text">except*</code> 구문은 일반적인 예외 객체 및 <code class="language-text">except</code> 문을 대체하지는 않습니다.
사실, <code class="language-text">ExceptionGroup</code> 을 직접 만드는 사용 사례는 많지 않을 것입니다.
다만 <code class="language-text">ExceptionGroup</code> 은 asyncio와 같은 라이브러리에서 주로 사용될 것입니다.</p><h3 id="예외에-메모-추가" style="position:relative"><a href="#%EC%98%88%EC%99%B8%EC%97%90-%EB%A9%94%EB%AA%A8-%EC%B6%94%EA%B0%80" aria-label="예외에 메모 추가 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>예외에 메모 추가</h3><p>예외 객체에 다음처럼 <code class="language-text">.add_note()</code> 메서드를 통해 메모를 추가하고, <code class="language-text">__notes__</code> 속성을 통해 확인할 수 있습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> err <span class="token operator">=</span> ValueError<span class="token punctuation">(</span><span class="token number">678</span><span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> err<span class="token punctuation">.</span>add_note<span class="token punctuation">(</span><span class="token string">&quot;Enriching Exceptions with Notes&quot;</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> err<span class="token punctuation">.</span>add_note<span class="token punctuation">(</span><span class="token string">&quot;파이썬 3.11&quot;</span><span class="token punctuation">)</span></span>
<span class="gatsby-highlight-code-line"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> err<span class="token punctuation">.</span>__notes__</span><span class="gatsby-highlight-code-line"><span class="token punctuation">[</span><span class="token string">&#x27;Enriching Exceptions with Notes&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;파이썬 3.11&#x27;</span><span class="token punctuation">]</span></span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">raise</span> err
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
ValueError<span class="token punctuation">:</span> <span class="token number">678</span>
<span class="gatsby-highlight-code-line">Enriching Exceptions <span class="token keyword">with</span> Notes</span><span class="gatsby-highlight-code-line">파이썬 <span class="token number">3.11</span></span></code></pre></div><p>오류가 발생하면 관련 메모가 트레이스백 하단에 출력됩니다.</p><p>다음 예제는 <code class="language-text">except</code> 블록에서 예외에 메모를 추가합니다.
오류 메시지를 프로그램의 실행 중인 로그와 비교해야 하는 경우에 유용할 수 있습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># timestamped_errors.py</span>

<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    inverse<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">inverse</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> number

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        main<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> err<span class="token punctuation">:</span>
<span class="gatsby-highlight-code-line">        err<span class="token punctuation">.</span>add_note<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;Raised at </span><span class="token interpolation"><span class="token punctuation">{</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>        <span class="token keyword">raise</span></code></pre></div><div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre class="language-bash"><code class="language-bash">$ python timestamped_errors.py
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  <span class="token punctuation">..</span>.
ZeroDivisionError: division by zero
<span class="gatsby-highlight-code-line">Raised at <span class="token number">2022</span>-10-24 <span class="token number">12</span>:18:13.913838</span></code></pre></div><blockquote><p>동일한 패턴을 사용하여 예외에 다른 유용한 정보를 추가할 수 있습니다.
자세한 내용은 <a href="https://realpython.com/python311-exception-groups/#annotate-exceptions-with-custom-notes">파이썬 3.11 미리 보기</a> 및 <a href="https://peps.python.org/pep-0678/">PEP 678</a>을 참조하세요.</p></blockquote><h3 id="음수-0-형식" style="position:relative"><a href="#%EC%9D%8C%EC%88%98-0-%ED%98%95%EC%8B%9D" aria-label="음수 0 형식 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>음수 0 형식</h3><p>부동 소수점 숫자로 계산할 때 마주칠 수 있는 이상한 개념 중 하나는 음수 0 입니다.
다음처럼 음수 0과 일반 0이 다르게 렌더링되는 것을 관찰할 수 있습니다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">0.0</span>
<span class="token operator">-</span><span class="token number">0.0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">0.0</span>
<span class="token number">0.0</span></code></pre></div><p>파이썬은 두 표현이 같다는 것을 알고 있습니다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">0.0</span> <span class="token operator">==</span> <span class="token number">0.0</span>
<span class="token boolean">True</span></code></pre></div><p>일반적으로 계산에서 음수 0에 대해 걱정할 필요가 없습니다.
그러나 반올림된 작은 음수가 포함된 데이터를 표시하면 기대하지 않은 결과가 발생할 수 있습니다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> small <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.00311</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string-interpolation"><span class="token string">f&quot;A small number: </span><span class="token interpolation"><span class="token punctuation">{</span>small<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
<span class="token string">&#x27;A small number: -0.00&#x27;</span></code></pre></div><p>일반적으로 숫자가 0으로 반올림되면 부호 없는 0으로 표시되는걸 기대합니다.
그러나 위 경우 0 앞에 음수 기호가 표시되어 있습니다.</p><p>파이썬 3.11에서는 f-String 문법에 다음처럼 <code class="language-text">z</code> 를 추가하여 이를 부호 없는 0으로 표시할 수 있습니다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> small <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.00311</span>
<span class="gatsby-highlight-code-line"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token string-interpolation"><span class="token string">f&quot;A small number: </span><span class="token interpolation"><span class="token punctuation">{</span>small<span class="token punctuation">:</span><span class="token format-spec">z.2f</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span></span><span class="token string">&#x27;A small number: 0.00&#x27;</span></code></pre></div><h3 id="추후에-제거될-내장-모듈-표시" style="position:relative"><a href="#%EC%B6%94%ED%9B%84%EC%97%90-%EC%A0%9C%EA%B1%B0%EB%90%A0-%EB%82%B4%EC%9E%A5-%EB%AA%A8%EB%93%88-%ED%91%9C%EC%8B%9C" aria-label="추후에 제거될 내장 모듈 표시 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>추후에 제거될 내장 모듈 표시</h3><p>파이썬에서는 기본적으로 많은 내장 모듈들을 제공했습니다.
그러나 시간이 지남에 따라 잘 사용되지 않는 내장 모듈들이 존재하게 되었고, 이들 중 일부는 추후에 내장 모듈 목록에서 사라지게 될 예정입니다.</p><p>이 모듈들은 import 할 때 다음과 같은 경고 메시지를 보여줍니다.</p><div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> imghdr
<span class="token operator">&lt;</span>stdin<span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">:</span> DeprecationWarning<span class="token punctuation">:</span> <span class="token string">&#x27;imghdr&#x27;</span> <span class="token keyword">is</span> deprecated <span class="token keyword">and</span> slated <span class="token keyword">for</span>
           removal <span class="token keyword">in</span> 파이썬 <span class="token number">3.13</span></code></pre></div><p>추후에 사라지게 될 내장 모듈 목록은 <a href="https://peps.python.org/pep-0594/#deprecated-modules">PEP-594</a>에서 확인하실 수 있습니다.</p><h2 id="결론" style="position:relative"><a href="#%EA%B2%B0%EB%A1%A0" aria-label="결론 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>결론</h2><p>다음과 같은 새로운 기능과 개선 사항을 확인했습니다.</p><ul><li>더 유익한 트레이스백으로 더 나은 오류 메시지</li><li>Faster CPython 프로젝트 의 상당한 노력으로 인한 더 빠른 코드 실행</li><li>비동기 코드 작업을 단순화하는 작업 및 예외 그룹</li><li>Python의 정적 입력 지원 을 개선하는 몇 가지 새로운 입력 기능</li><li>구성 파일 작업을 위한 기본 TOML 지원</li></ul></div><div id="disqus_thread"></div></main><footer><ul class="external-links"><li><a href="https://www.facebook.com/heumsi/"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.8 90.69 226.4 209.3 245V327.7h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.3 482.4 504 379.8 504 256z"></path></svg></a></li><li><a href="https://www.linkedin.com/in/siheum-jeon-04222a1b3/"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li><a href="https://github.com/heumsi/"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li><a href="https://bit.ly/3zAT8Ab"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="file-lines" class="svg-inline--fa fa-file-lines " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M256 0v128h128L256 0zM224 128L224 0H48C21.49 0 0 21.49 0 48v416C0 490.5 21.49 512 48 512h288c26.51 0 48-21.49 48-48V160h-127.1C238.3 160 224 145.7 224 128zM272 416h-160C103.2 416 96 408.8 96 400C96 391.2 103.2 384 112 384h160c8.836 0 16 7.162 16 16C288 408.8 280.8 416 272 416zM272 352h-160C103.2 352 96 344.8 96 336C96 327.2 103.2 320 112 320h160c8.836 0 16 7.162 16 16C288 344.8 280.8 352 272 352zM288 272C288 280.8 280.8 288 272 288h-160C103.2 288 96 280.8 96 272C96 263.2 103.2 256 112 256h160C280.8 256 288 263.2 288 272z"></path></svg></a></li></ul><p class="copy-right">@ heumsi</p></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/python311-new-features/";window.___webpackCompilationHash="9023d6fb65f6071942db";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4aa291e7e6681714b3e8.js"],"app":["/app-c321c5efdf12999a1dd7.js"],"component---src-components-templates-log-js":["/component---src-components-templates-log-js-8be2b192cec9967ef4ea.js"],"component---src-components-templates-post-js":["/component---src-components-templates-post-js-d80014afc9ad124b5ee3.js"],"component---src-pages-404-js":["/component---src-pages-404-js-5ed0d86fb0763a04a4b4.js"],"component---src-pages-index-js":["/component---src-pages-index-js-67136b30be5717c21631.js"],"component---src-pages-logs-index-js":["/component---src-pages-logs-index-js-bf19e8f568991d11bb86.js"],"component---src-pages-posts-index-js":["/component---src-pages-posts-index-js-2779df3cf8aef25ec545.js"]};/*]]>*/</script><script src="/blog/polyfill-4aa291e7e6681714b3e8.js" nomodule=""></script><script src="/blog/app-c321c5efdf12999a1dd7.js" async=""></script><script src="/blog/framework-c9b92197cbae3c33e091.js" async=""></script><script src="/blog/webpack-runtime-d16735df36b4c0712223.js" async=""></script></body></html>