<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-rh="true" property="keywords" content="Kubernetes,CSA,SSA"/><meta data-rh="true" property="og:image" content="/blog/static/16bee52d861719ebb9351d2ff0dc005f/0ea1b/thumbnail.png"/><meta data-rh="true" property="og:description" content="1.22부터 GA로 포함된 이 옵션"/><meta data-rh="true" property="og:title" content="Kubernetes의 Server Side Apply란 무엇일까?"/><meta data-rh="true" property="og:url" content="https://heumsi.github.io/blog/posts/server-side-apply-in-kubernetes/"/><meta data-rh="true" name="description" content="1.22부터 GA로 포함된 이 옵션"/><meta data-rh="true" name="googlebot" content="index,follow"/><meta data-rh="true" name="robots" content="index,follow"/><meta data-rh="true" property="og:site_name" content="하나씩. 점을. 찍어나가며."/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" name="twitter:creator" content="@handle"/><meta data-rh="true" name="twitter:site" content="@site"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta name="generator" content="Gatsby 4.17.2"/><style data-href="/blog/styles.202b843a3255cda52de9.css" data-identity="gatsby-global-css">/*! minireset.css v0.0.7 | MIT License | github.com/jgthms/minireset.css */blockquote,body,dd,dl,dt,fieldset,figure,h1,h2,h3,h4,h5,h6,hr,html,iframe,legend,li,ol,p,pre,textarea,ul{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}ul{list-style:none}button,input,select{margin:0}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}img,video{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}code[class*=language-],pre[class*=language-]{background:#fafafa;color:#383a42;direction:ltr;font-family:Fira Code,Fira Mono,Menlo,Consolas,DejaVu Sans Mono,monospace;font-size:.95em;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#e5e5e6;color:inherit}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection{background:#e5e5e6;color:inherit}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.2em .3em;white-space:normal}.token.cdata,.token.comment,.token.prolog{color:#a0a1a7}.token.doctype,.token.entity,.token.punctuation{color:#383a42}.token.atrule,.token.attr-name,.token.boolean,.token.class-name,.token.constant,.token.number{color:#b76b01}.token.keyword{color:#a626a4}.token.deleted,.token.important,.token.property,.token.symbol,.token.tag{color:#e45649}.token.attr-value,.token.attr-value>.token.punctuation,.token.builtin,.token.char,.token.inserted,.token.regex,.token.selector,.token.string{color:#50a14f}.token.function,.token.operator,.token.variable{color:#4078f2}.token.url{color:#0184bc}.token.attr-value>.token.punctuation.attr-equals,.token.special-attr>.token.attr-value>.token.value.css{color:#383a42}.language-css .token.selector{color:#e45649}.language-css .token.property{color:#383a42}.language-css .token.function,.language-css .token.url>.token.function{color:#0184bc}.language-css .token.url>.token.string.url{color:#50a14f}.language-css .token.atrule .token.rule,.language-css .token.important,.language-javascript .token.operator{color:#a626a4}.language-javascript .token.template-string>.token.interpolation>.token.interpolation-punctuation.punctuation{color:#ca1243}.language-json .token.operator{color:#383a42}.language-json .token.null.keyword{color:#b76b01}.language-markdown .token.url,.language-markdown .token.url-reference.url>.token.string,.language-markdown .token.url>.token.operator{color:#383a42}.language-markdown .token.url>.token.content{color:#4078f2}.language-markdown .token.url-reference.url,.language-markdown .token.url>.token.url{color:#0184bc}.language-markdown .token.blockquote.punctuation,.language-markdown .token.hr.punctuation{color:#a0a1a7;font-style:italic}.language-markdown .token.code-snippet{color:#50a14f}.language-markdown .token.bold .token.content{color:#b76b01}.language-markdown .token.italic .token.content{color:#a626a4}.language-markdown .token.list.punctuation,.language-markdown .token.strike .token.content,.language-markdown .token.strike .token.punctuation,.language-markdown .token.title.important>.token.punctuation{color:#e45649}.token.bold{font-weight:700}.token.comment,.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.8}.token.token.cr:before,.token.token.lf:before,.token.token.space:before,.token.token.tab:not(:empty):before{color:rgba(56,58,66,.2)}div.code-toolbar>.toolbar.toolbar>.toolbar-item{margin-right:.4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span{background:#e5e5e6;border-radius:.3em;color:#696c77;padding:.1em .4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:hover{background:#c6c7c7;color:#383a42}.line-highlight.line-highlight{background:rgba(56,58,66,.05)}.line-highlight.line-highlight:before,.line-highlight.line-highlight[data-end]:after{background:#e5e5e6;border-radius:.3em;box-shadow:0 2px 0 0 rgba(0,0,0,.2);color:#383a42;padding:.1em .6em}pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:rgba(56,58,66,.05)}.command-line .command-line-prompt,.line-numbers.line-numbers .line-numbers-rows{border-right-color:rgba(56,58,66,.2)}.command-line .command-line-prompt>span:before,.line-numbers .line-numbers-rows>span:before{color:#9d9d9f}.rainbow-braces .token.token.punctuation.brace-level-1,.rainbow-braces .token.token.punctuation.brace-level-5,.rainbow-braces .token.token.punctuation.brace-level-9{color:#e45649}.rainbow-braces .token.token.punctuation.brace-level-10,.rainbow-braces .token.token.punctuation.brace-level-2,.rainbow-braces .token.token.punctuation.brace-level-6{color:#50a14f}.rainbow-braces .token.token.punctuation.brace-level-11,.rainbow-braces .token.token.punctuation.brace-level-3,.rainbow-braces .token.token.punctuation.brace-level-7{color:#4078f2}.rainbow-braces .token.token.punctuation.brace-level-12,.rainbow-braces .token.token.punctuation.brace-level-4,.rainbow-braces .token.token.punctuation.brace-level-8{color:#a626a4}pre.diff-highlight>code .token.token.deleted:not(.prefix),pre>code.diff-highlight .token.token.deleted:not(.prefix){background-color:rgba(255,82,102,.15)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix),pre>code.diff-highlight .token.token.inserted:not(.prefix){background-color:rgba(25,255,91,.15)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::-moz-selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::-moz-selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection{background-color:rgba(56,224,98,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::selection{background-color:rgba(56,224,98,.25)}.prism-previewer-gradient.prism-previewer-gradient div,.prism-previewer.prism-previewer:before{border-color:hsl(0,0,95%)}.prism-previewer-color.prism-previewer-color:before,.prism-previewer-easing.prism-previewer-easing:before,.prism-previewer-gradient.prism-previewer-gradient div{border-radius:.3em}.prism-previewer.prism-previewer:after{border-top-color:hsl(0,0,95%)}.prism-previewer-flipped.prism-previewer-flipped.after{border-bottom-color:hsl(0,0,95%)}.prism-previewer-angle.prism-previewer-angle:before,.prism-previewer-easing.prism-previewer-easing,.prism-previewer-time.prism-previewer-time:before{background:#fff}.prism-previewer-angle.prism-previewer-angle circle,.prism-previewer-time.prism-previewer-time circle{stroke:#383a42;stroke-opacity:1}.prism-previewer-easing.prism-previewer-easing circle,.prism-previewer-easing.prism-previewer-easing line,.prism-previewer-easing.prism-previewer-easing path{stroke:#383a42}.prism-previewer-easing.prism-previewer-easing circle{fill:transparent}.gatsby-highlight-code-line{background-color:#eee;display:block;margin-left:-1em;margin-right:-1em;padding-left:1em;padding-right:1em}.gatsby-highlight{background:#fafafa;margin:0 0 1em;overflow:auto;padding:1em}.gatsby-highlight pre[class*=language-]{background-color:transparent;float:left;margin:0;min-width:100%;overflow:initial;padding:0}.toc{overflow-y:auto}.toc>.toc-list{overflow:hidden;position:relative}.toc>.toc-list li{list-style:none}.toc-list{margin:0;padding-left:10px}a.toc-link{color:currentColor;height:100%}.is-collapsible{max-height:1000px;overflow:hidden;transition:all .3s ease-in-out}.is-collapsed{max-height:0}.is-position-fixed{position:fixed!important;top:0}.is-active-link{font-weight:700}.toc-link:before{background-color:#eee;content:" ";display:inline-block;height:inherit;left:0;margin-top:-1px;position:absolute;width:2px}.is-active-link:before{background-color:#54bc4b}.toc{color:#333;font-size:.8em;left:0;line-height:1.8em;max-width:20rem;padding-left:1rem;position:fixed;top:50vh;transform:translateY(-50%);transition:all .4s cubic-bezier(.25,.8,.4,.95);visibility:visible;width:100%}.toc-list-item{font-weight:300}.is-active-link{font-weight:400}.toc-hidden{transform:translate(-100%,-50%);visibility:hidden}.toc-link:before{background-color:inherit}@media only screen and (max-width:85rem){.toc{visibility:hidden}}*{color:inherit;text-decoration:none}body{-ms-text-size-adjust:100%;-moz-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#333;font-size:1rem;word-break:break-all}h1{font-size:2.441em}h1,h2{font-weight:700}h2{font-size:1.953em}h3{font-size:1.563em}h3,h4{font-weight:700}h4{font-size:1.25em}li,p{font-size:1em;font-weight:400;line-height:1.8em}a{cursor:pointer}.container{font-family:sans-serif;margin:auto;max-width:45rem;width:100%}header{align-items:center;display:flex;justify-content:space-between;margin:1.5rem 0 1rem}header .site-title{font-weight:700;margin:0;transition:.33s}header .site-title:hover{color:#344cb7}header nav{display:flex;font-weight:400}header nav .nav-item a{padding-right:1.5rem;transition:.33s}header nav .nav-item a:hover{color:#344cb7}header nav .nav-item a:last-child{padding-right:0}.content .page-title{font-weight:500}.content .post-item{align-items:center;list-style:none;margin:2rem 0;transition:.33s}.content .post-item:hover{color:#344cb7}.content .post-item a{text-decoration:none}.content .post-item article{display:flex}.content .post-item-thumbnail{height:7rem;width:7rem}.content .post-item-desc{display:flex;flex-direction:column;height:7rem;margin-left:1.5rem}.content .post-item-title{font-weight:400;margin-top:0}.content .post-item-sub-title{line-height:1.4em;margin-top:.5rem}.content .post-item-meta{color:#666;font-size:.9em;line-height:1em;margin:auto 0 0}.content .post-cover-image{height:400px;left:50%;margin-bottom:2rem;margin-left:-50vw;margin-right:-50vw;max-width:100vw;position:relative;right:50%;width:100vw}.content .post-sub-title{color:#666;font-weight:400;margin-top:1rem}.content .post-meta{color:#666;display:block;margin-top:.5rem}.content .post-content{margin:3rem 0 5rem}.content .log-content{margin-top:1rem}.content .post-content h2,h3,h4{margin-top:2em}.content .post-content p{margin:1em 0}.content .post-content hr{background-color:#eee;border:0;height:1px;margin:2em}.content .post-content table{overflow-x:auto;width:100%}.content .post-content table th{background-color:#fafafa}.content .post-content table th,td{border:1px solid #ccc;padding:.5em}.content .log-content a,.content .post-content a{text-decoration:underline}.content .post-content>ul{margin:1em 0}.content .log-content ul li,.content .post-content ul li{list-style:outside;margin-left:1em}.content .log-content ul li p,.content .post-content ul li p{margin:0}.content .log-content ol li,.content .post-content ol li{margin-left:1em}.content .post-content .gatsby-resp-image-wrapper{margin:2em 0}.content .log-content .gatsby-resp-image-wrapper{margin:1em 0;margin-left:0!important;margin-right:0!important;max-width:100%!important}.content .log-content .gatsby-resp-image-wrapper+em,.content .post-content .gatsby-resp-image-wrapper+em{color:#999;display:block;font-size:.9em;font-style:normal;line-height:1.5em;margin:-1.5em auto 2em;max-width:90%;text-align:center}.content .log-content blockquote,.content .post-content blockquote{background:#f6f6f6;border-left:4px solid #e6e6e6;color:#666;margin:1rem 0;padding:1rem}.content .log-content blockquote code,.content .post-content blockquote code{color:#666}.content .log-content blockquote ol,.content .log-content blockquote p,.content .log-content blockquote ul,.content .post-content blockquote ol,.content .post-content blockquote p,.content .post-content blockquote ul{margin:1em 0}.content .log-content blockquote p:first-child,.content .log-content blockquote p:last-child,.content .post-content blockquote p:first-child,.content .post-content blockquote p:last-child{margin:0}.content .post-content .mermaid{margin:0 auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.content .log-item{line-height:1.8em;margin:2rem 0}.content .log-title span{cursor:pointer;font-size:.6em;margin-left:.6em;opacity:.6;transition:.33s}.content .log-title span:hover{opacity:1}.content .log-content a{text-decoration:underline}.content .log-datetime{color:#666;font-size:.9em}footer{align-items:center;color:#666;display:flex;justify-content:space-between;margin:3rem 0}footer .external-links li{display:inline-block;margin:0 .5rem;transition:.33s}footer .external-links li:hover{color:#344cb7}footer .copy-right{font-size:.9rem;text-align:right}@media screen and (max-width:800px){html{font-size:1rem}h1{font-size:1.749em}h1,h2{font-weight:700}h2{font-size:1.521em}h3{font-size:1.322em}h3,h4{font-weight:700}h4{font-size:1.15em}.container{padding:0 1rem}header .site-title{font-size:1rem}header nav .nav-item a{padding-right:1rem}.content .post-list .post-item{border-bottom:1px solid #ccc;margin:0 -1rem;padding:1rem}.content .post-list .post-item:last-child{border-bottom:none}.content .post-list .post-item a{text-decoration:none}.content .post-cover-image{margin-bottom:1.5rem}.content .page-title{font-size:1rem}.content .post-item-title{font-size:1.2rem}.content .post-item-thumbnail{display:none!important}.content .post-item-desc{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin-left:0}.content .post-item-meta{line-height:1.4em}footer{margin:1rem 0}}</style><link rel="preconnect" href="https://plausible.io"/><script async="" defer="" data-domain="heumsi.github.io/blog" src="https://plausible.io/js/plausible.js"></script><script>
          window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) };
          
          </script><title data-rh="true">Kubernetes의 Server Side Apply란 무엇일까?</title><link data-rh="true" rel="canonical" href="https://heumsi.github.io/blog/posts/server-side-apply-in-kubernetes/"/><script data-rh="true" defer="" src="https://cloud.umami.is/script.js" data-website-id="c247e343-b8cb-4751-8e13-8e8557a94875"></script><link rel="sitemap" type="application/xml" href="/blog/sitemap/sitemap-index.xml"/><link rel="alternate" type="application/rss+xml" title="하나씩 점을 찍어나가며 - Heumsi의 블로그 RSS" href="/blog/rss.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZRH97WV1XY"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'G-ZRH97WV1XY'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = false;

    var options = {
      send_page_view: false
    };
    if (false) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'G-ZRH97WV1XY', options);
  </script><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="container"><header><h3 class="site-title"><a href="/blog/">하나씩. 점을. 찍어나가며.</a></h3><nav><ul><li class="nav-item"><a class="nav-link-text" href="/blog/posts">글</a><a class="nav-link-text" href="/blog/logs">로그</a></li></ul></nav></header><main class="content"><section class="post-cover-image gbi-2032240659-ifXARp9pjjcAyd47wG1Mup" style="background-position:center;background-repeat:no-repeat;background-size:cover;position:relative"><style>
          .post-cover-image.gbi-2032240659-ifXARp9pjjcAyd47wG1Mup:before,
          .post-cover-image.gbi-2032240659-ifXARp9pjjcAyd47wG1Mup:after {
            content: '';
            display: block;
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            
            transition: opacity 0.5s ease 250ms;
            background-position: center;
background-repeat: no-repeat;
background-size: cover;

          }
          .post-cover-image.gbi-2032240659-ifXARp9pjjcAyd47wG1Mup:before {
            z-index: -100;
            
            
            opacity: 1; 
          }
          .post-cover-image.gbi-2032240659-ifXARp9pjjcAyd47wG1Mup:after {
            z-index: -101;
            
            
            
          }
        </style><noscript><style>
    .post-cover-image.gbi-2032240659-ifXARp9pjjcAyd47wG1Mup:before {
      opacity: 1;
      background-image: url('/blog/static/16bee52d861719ebb9351d2ff0dc005f/0ea1b/thumbnail.png');
    }</style></noscript></section><h1 class="post-title">Kubernetes의 Server Side Apply란 무엇일까?</h1><h3 class="post-sub-title">1.22부터 GA로 포함된 이 옵션</h3><p class="post-meta"><span>2022년 12월 26일</span> — <span>Kubernetes<!-- -->, <!-- -->CSA<!-- -->, <!-- -->SSA</span></p><div class="toc toc-hidden"></div><div class="post-content"><p>이번 글에서는 쿠버네티스 1.22부터 GA 버전으로 들어오게된 SSA(Server Side Apply)에 대해 정리해본다.</p><h2 id="code-classlanguage-textlast-applied-configurationcode의-역할" style="position:relative"><a href="#code-classlanguage-textlast-applied-configurationcode%EC%9D%98-%EC%97%AD%ED%95%A0" aria-label="code classlanguage textlast applied configurationcode의 역할 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">last-applied-configuration</code>의 역할</h2><p>SSA에 대해 바로 말하기 전에, 기존의 Apply 방식부터 하나씩 살펴보자.</p><p>다음과 같은 Configmap을 정의한 Manifest 파일이 있다고 하자.</p><div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token comment"># cm-csa.yaml</span>

<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> cm<span class="token punctuation">-</span>csa
<span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">&quot;value&quot;</span></code></pre></div><p>이런 Manifest 파일을 쿠버네티스 클러스터에 배포할 때는 보통 다음처럼 <code class="language-text">kubectl apply</code> 명령어를 사용한다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl apply -f cm-csa.yaml

configmap/cm-csa created</code></pre></div><p>만들어진 오브젝트를 확인해보면 다음과 같다.</p><div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml">$ kubectl get cm cm<span class="token punctuation">-</span>csa <span class="token punctuation">-</span>o yaml

<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">key</span><span class="token punctuation">:</span> value
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">kubectl.kubernetes.io/last-applied-configuration</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
      {&quot;apiVersion&quot;:&quot;v1&quot;,&quot;data&quot;:{&quot;key&quot;:&quot;value&quot;},&quot;kind&quot;:&quot;ConfigMap&quot;,&quot;metadata&quot;:{&quot;annotations&quot;:{},&quot;name&quot;:&quot;cm-csa&quot;,&quot;namespace&quot;:&quot;default&quot;}}</span>
  <span class="token key atrule">creationTimestamp</span><span class="token punctuation">:</span> <span class="token string">&quot;2022-12-21T14:28:14Z&quot;</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> cm<span class="token punctuation">-</span>csa
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
  <span class="token key atrule">resourceVersion</span><span class="token punctuation">:</span> <span class="token string">&quot;2193971&quot;</span>
  <span class="token key atrule">uid</span><span class="token punctuation">:</span> 33084809<span class="token punctuation">-</span>6b86<span class="token punctuation">-</span>479e<span class="token punctuation">-</span>95af<span class="token punctuation">-</span>97d45e38daf6</code></pre></div><p>이 때 <code class="language-text">metadata.annotataions</code> 안에 <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 키가 추가가 되어있다.
이 키의 값은 내가 방금 <code class="language-text">kubectl apply</code> 로 제출한 내용을 그대로 담아낸다.</p><p>그럼 <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 값은 그럼 어떤 용도로 쓰이는걸까?</p><p>우리가 다음 차례에 (미래에 있을) <code class="language-text">kubectl apply</code> 를 할 때, 쿠버네티스가 오브젝트를 업데이트하는 과정에서 쓰인다.
쿠버네티스가 오브젝트를 업데이트 하는 과정은 간략히 다음과 같다.</p><ol><li>먼저 오브젝트에서 삭제할 필드를 계산한다. 이 필드들은 <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 내에는 존재하는데, 전달받은 Manifest 파일 내에는 없는 필드들이다.</li><li>그런 다음, 추가 또는 설정되어야 할 필드를 계산한다. 이 필드들은 현재 배포되어 있는 오브젝트와 불일치하는 값을 가지는 Manifest 파일 내 존재하는 필드이다.</li></ol><blockquote><p>구체적인 예시가 궁금하다면, <a href="https://kubernetes.io/docs/tasks/manage-kubernetes-objects/declarative-config/#merge-patch-calculation">이 페이지</a>를 참고하자.</p></blockquote><p>이렇듯 <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 는 오브젝트를 업데이트 할 때, 기존 오브젝트와 새 오브젝트 내용을 머지 패치(Merge Patch) 할 때 쓰인다.</p><h2 id="field-manager" style="position:relative"><a href="#field-manager" aria-label="field manager permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Field Manager</h2><p><code class="language-text">kubectl apply</code> 를 실행할 때 위 1, 2 과정과 같이 복잡한 머지 패치를 하지 않고 <code class="language-text">kubectl apply -f {Manifest 파일 경로}</code> 에서 전달받은 Manifest의 내용으로 그냥 덮어써서(Overwrite) 배포해버리면 되는거 아닌가? 싶을 수 있다.
그러나 기본적으로 <code class="language-text">kubectl apply</code> 가 이렇게 덮어쓰지 않고 귀찮더라도 머지 패치를 하는 이유는, <code class="language-text">kubectl apply</code> 을 실행할 때 추가, 수정된 필드를 그대로 보존하기 위함이다.</p><p>예를 들어, 다음처럼 위에서 만든 오브젝트에 라벨 <code class="language-text">key: value</code> 을 추가해보자.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl label cm cm-csa <span class="token assign-left variable">key</span><span class="token operator">=</span>value

configmap/cm-csa labeled</code></pre></div><p>이렇게 추가된 <code class="language-text">key: value</code> 라벨은 <code class="language-text">kubectl apply</code> 로 제어되지 않는다.
이유는 이 라벨은 <code class="language-text">kubectl apply</code> 을 통해 추가된 것이 아니여서 <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 에 포함되어 있지 않기 때문이다.
정말 그런지 확인해보자.</p><div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl get cm cm-csa -o yaml    
                 
apiVersion: v1
data:
  key: value
kind: ConfigMap
metadata:
  annotations:
<span class="gatsby-highlight-code-line">    kubectl.kubernetes.io/last-applied-configuration: <span class="token operator">|</span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">{</span><span class="token string">&quot;apiVersion&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;v1&quot;</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;kind&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;ConfigMap&quot;</span>,<span class="token string">&quot;metadata&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;annotations&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;cm-csa&quot;</span>,<span class="token string">&quot;namespace&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>  creationTimestamp: <span class="token string">&quot;2022-12-21T14:28:14Z&quot;</span>
<span class="gatsby-highlight-code-line">  labels:</span><span class="gatsby-highlight-code-line">    key: value</span>  name: cm-csa
  namespace: default
  resourceVersion: <span class="token string">&quot;2194033&quot;</span>
  uid: <span class="token number">33084809</span>-6b86-479e-95af-97d45e38daf6</code></pre></div><p><code class="language-text">key: value</code> 라벨은 추가되었지만, <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 내에 이 라벨은 추가되지 않았다.
이 때문에 이 라벨은 <code class="language-text">kubectl apply</code> 를 통해 머지 패치가 진행될 때 삭제되지 않는다.</p><p>그럼 왜 이렇게 설계되어 있을까?
그 이유는 각 필드마다 그 필드를 관리하는 주체(Field Manager)가 다를 수 있기 때문이다.</p><p>예를 들어, <code class="language-text">kubectl apply -f cm-csa.yaml</code> 은 데브옵스 팀에 의해서 실행되었고, <code class="language-text">kubectl label cm cm-csa key=value</code> 는 서비스 팀에 의해서 실행되었다고 해보자.
만들어진 오브젝트에 대한 관리 주체는 기본적으로 데브옵스 팀이 되지만, <code class="language-text">key: value</code> 라벨에 한해서는 서비스팀이 관리 주체가 된다는 것이다.</p><p>만약 오브젝트를 업데이트 하는 과정에서 머지 패치를 안하고 그냥 덮어쓴다면, 서비스팀이 만든 라벨은 갑자기 데브옵스 팀에 의해 사라지게 될 것이다.
이렇게 안되게 하기 위해 머지 패치 과정을 거치게 하는 것이고, <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 를 이 과정 중에 사용하는 것이다.</p><p>다음처럼 <code class="language-text">kubectl</code> 옵션 중 하나인 <code class="language-text">--show-managed-fields</code> 를 사용하면 실제로 각 필드의 관리 주체가 누구인지 알 수 있다.</p><div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl get cm cm-csa -o yaml --show-managed-fields

apiVersion: v1
data:
  key: value
kind: ConfigMap
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: <span class="token operator">|</span>
      <span class="token punctuation">{</span><span class="token string">&quot;apiVersion&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;v1&quot;</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;kind&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;ConfigMap&quot;</span>,<span class="token string">&quot;metadata&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;annotations&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;cm-csa&quot;</span>,<span class="token string">&quot;namespace&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  creationTimestamp: <span class="token string">&quot;2022-12-21T14:28:14Z&quot;</span>
  labels:
    key: value
  managedFields:
<span class="gatsby-highlight-code-line">  - apiVersion: v1</span><span class="gatsby-highlight-code-line">    fieldsType: FieldsV1</span><span class="gatsby-highlight-code-line">    fieldsV1:</span><span class="gatsby-highlight-code-line">      f:data:</span><span class="gatsby-highlight-code-line">        .: <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">        f:key: <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">      f:metadata:</span><span class="gatsby-highlight-code-line">        f:annotations:</span><span class="gatsby-highlight-code-line">          .: <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">          f:kubectl.kubernetes.io/last-applied-configuration: <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">    manager: kubectl-client-side-apply</span><span class="gatsby-highlight-code-line">    operation: Update</span><span class="gatsby-highlight-code-line">    time: <span class="token string">&quot;2022-12-21T14:28:14Z&quot;</span></span><span class="gatsby-highlight-code-line">  - apiVersion: v1</span><span class="gatsby-highlight-code-line">    fieldsType: FieldsV1</span><span class="gatsby-highlight-code-line">    fieldsV1:</span><span class="gatsby-highlight-code-line">      f:metadata:</span><span class="gatsby-highlight-code-line">        f:labels:</span><span class="gatsby-highlight-code-line">          .: <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">          f:key: <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">    manager: kubectl-label</span><span class="gatsby-highlight-code-line">    operation: Update</span><span class="gatsby-highlight-code-line">    time: <span class="token string">&quot;2022-12-21T14:28:50Z&quot;</span></span>  name: cm-csa
  namespace: default
  resourceVersion: <span class="token string">&quot;2194033&quot;</span>
  uid: <span class="token number">33084809</span>-6b86-479e-95af-97d45e38daf6</code></pre></div><p><code class="language-text">managedFields</code> 내에 다음처럼 2개의 <code class="language-text">manager</code> 가 보인다.</p><ul><li><code class="language-text">kubectl-client-side-apply</code></li><li><code class="language-text">kubectl-label</code></li></ul><p>첫 번째의 경우 <code class="language-text">kubectl apply</code> 로 인해 생긴 필드들을 관리하는 주체임을 알 수 있다.
두 번째의 경우는 <code class="language-text">kubectl label</code> 로 인해 생긴 필드들을 관리하는 주체임을 알 수 있다.
이렇듯, 각 필드는 각자의 관리 주체를 가진다.</p><blockquote><p>물론 위처럼 <code class="language-text">kubectl apply</code> 이 아닌 배포 명령어들(<code class="language-text">kubectl label</code>, <code class="language-text">kubectl patch</code>, <code class="language-text">kubectl edit</code> 등)을 쓰거나 혼용하는 것은 안티패턴이다.
여기서는 단지 예를 위해 위렇게 표현했다.</p><p>그리고 보통 프로덕션 환경에서의 관리 주체는 위처럼 특정 팀이라기 보단 배포 도구나 Operator들이 되곤 한다.
kubectl, helm, ArgoCD 등이 이 예시가 되겠다.</p></blockquote><h2 id="csa-client-side-apply" style="position:relative"><a href="#csa-client-side-apply" aria-label="csa client side apply permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSA (Client Side Apply)</h2><p>위에서 <code class="language-text">kubectl apply</code> 로 인해 생긴 필드들의 관리 주체가 <code class="language-text">kubectl-client-side-apply</code> 임을 알았다.
그런데 왜 <code class="language-text">kubectl-apply</code> 가 아니라 <code class="language-text">kubectl-client-side-apply</code> 일까?
왜 <code class="language-text">client-side</code> 란 용어가 들어가있을까?</p><p>이유는, 우리가 일반적으로 사용해온 <code class="language-text">kubectl apply</code> 는 Client Side 옵션으로 실행되기 때문이다.
이는 다음처럼 <code class="language-text">kubectl apply</code> 의 옵션을 살펴보면 알 수 있다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl apply --help

<span class="token punctuation">..</span>.
--field-manager<span class="token operator">=</span><span class="token string">&#x27;kubectl-client-side-apply&#x27;</span><span class="token builtin class-name">:</span>
        Name of the manager used to track field ownership.
<span class="token punctuation">..</span>.
--server-side<span class="token operator">=</span>false:
        If true, apply runs <span class="token keyword">in</span> the server instead of the client.
<span class="token punctuation">..</span>.</code></pre></div><p>기본적으로 <code class="language-text">--server-side</code> 옵션의 값이 <code class="language-text">false</code> 이기 때문에, 우리가 위에서 실행한 <code class="language-text">kubectl apply</code> 를 좀 더 풀어쓰면 다음과 같다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl apply -f cm-csa.yaml --server-side<span class="token operator">=</span>false</code></pre></div><p>이처럼 우리가 일반적으로 사용하는 <code class="language-text">kubectl apply</code> 는 <code class="language-text">--server-side=false</code> 옵션이 붙어서 실행되며, 이렇게 실행하는 방식을 CSA(Client Side Apply)라 부른다.</p><p>CSA의 특징은 API 서버에게 요청을 보낼 때, 최종적으로 요청에 실을 Manifest를 클라이언트에서 모두 만들고 요청을 보낸다는 것이다.
즉 머지 패칭의 과정을 클라이언트(kubectl)에서 실행한다(<code class="language-text">metadata.annotations</code> 에  <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 를 붙이는 것도 <a href="https://github.com/kubernetes/kubectl/blob/3e4add843df6081d9a679b6d70a24b01c307d2dd/pkg/cmd/apply/apply.go#L752"><code class="language-text">kubectl</code> 이 한다</a>).
API 서버는 요청에 실려있는 Manifest를 패치(PATCH) 하기만 한다.</p><h2 id="csa의-문제점" style="position:relative"><a href="#csa%EC%9D%98-%EB%AC%B8%EC%A0%9C%EC%A0%90" aria-label="csa의 문제점 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSA의 문제점</h2><p>Client Side Apply를 쓰면 어떤 문제 상황이 생길 수 있을까?</p><p>위처럼 <code class="language-text">kubectl label cm cm-csa key=value</code> 로 라벨을 추가한 상황에서 Manifest 파일을 다음처럼 수정한 뒤 배포한다고 해보자.</p><div class="gatsby-highlight has-highlighted-lines" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token comment"># cm-csa.yaml</span>

<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> cm<span class="token punctuation">-</span>csa
<span class="gatsby-highlight-code-line">  <span class="token key atrule">labels</span><span class="token punctuation">:</span></span><span class="gatsby-highlight-code-line">    <span class="token key atrule">key</span><span class="token punctuation">:</span> modified<span class="token punctuation">-</span>value</span><span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">&quot;value&quot;</span></code></pre></div><p><code class="language-text">key: modified-value</code> 라벨을 추가했다.
이 때, 기존의 라벨과 같은 <code class="language-text">key</code> 임을 인지하자.</p><p>이제 다음처럼 배포해보자.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl apply -f cm-csa.yaml

configmap/cm-csa configured</code></pre></div><p>문제없이 잘 배포되었다.</p><p>라벨이 잘 추가되었는지 확인해보자.</p><div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl get cm cm-csa -o yaml --show-managed-fields
apiVersion: v1
data:
  key: value
kind: ConfigMap
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: <span class="token operator">|</span>
      <span class="token punctuation">{</span><span class="token string">&quot;apiVersion&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;v1&quot;</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;kind&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;ConfigMap&quot;</span>,<span class="token string">&quot;metadata&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;annotations&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token string">&quot;labels&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;modified-value&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;cm-csa&quot;</span>,<span class="token string">&quot;namespace&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  creationTimestamp: <span class="token string">&quot;2022-12-21T15:05:49Z&quot;</span>
<span class="gatsby-highlight-code-line">  labels:</span><span class="gatsby-highlight-code-line">    key: modified-value</span>  managedFields:
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:metadata:
<span class="gatsby-highlight-code-line">        f:labels: <span class="token punctuation">{</span><span class="token punctuation">}</span></span>    manager: kubectl-label
    operation: Update
    time: <span class="token string">&quot;2022-12-21T15:06:00Z&quot;</span>
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:data:
        .: <span class="token punctuation">{</span><span class="token punctuation">}</span>
        f:key: <span class="token punctuation">{</span><span class="token punctuation">}</span>
      f:metadata:
        f:annotations:
          .: <span class="token punctuation">{</span><span class="token punctuation">}</span>
          f:kubectl.kubernetes.io/last-applied-configuration: <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="gatsby-highlight-code-line">        f:labels:</span><span class="gatsby-highlight-code-line">          f:key: <span class="token punctuation">{</span><span class="token punctuation">}</span></span>    manager: kubectl-client-side-apply
    operation: Update
    time: <span class="token string">&quot;2022-12-21T15:09:34Z&quot;</span>
  name: cm-csa
  namespace: default
  resourceVersion: <span class="token string">&quot;2197986&quot;</span>
  uid: 2f4c6231-c884-4302-a1e2-9cad271545d4</code></pre></div><p>문제없이 잘 추가되었다.
해당 라벨에 대한 <code class="language-text">manager</code> 도 <code class="language-text">kubectl-client-side-apply</code> 로 변경되었다.</p><p>자 그럼 이렇게 아무 문제없이 잘 변경된 것이 정말 문제가 없는 것일까?
<code class="language-text">kubectl label</code> 로 라벨을 최초에 추가한 사람 입장에선 갑자기 자기가 추가한 라벨의 값이 누군가에 의해서 바뀌게 되었다.
만약 이 과정 중 합의가 없었더라면, 이 사람에게는 꽤 짜증나는 상황이 될 것이다.</p><p>즉 지금의 문제는, 각 필드에 대한 관리 주체는 있으나 관리 주체가 아니더라도 누구나 필드를 수정하고 덮어쓸 수 있다는 것이다.</p><h2 id="ssa-server-side-apply" style="position:relative"><a href="#ssa-server-side-apply" aria-label="ssa server side apply permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SSA (Server Side Apply)</h2><p>위 같은 문제를 느낀 일부 유저들은 필드의 관리 주체가 아닌 주체가 필드를 업데이트하려고 한다면, 이를 바로 업데이트 하지 못하도록 API 서버 단에서 막아야 한다고 생각했다.
결국 클라이언트인 <code class="language-text">kubectl</code> 이 아니라, <a href="https://github.com/kubernetes/enhancements/issues/555">서버인 API 서버에서 Apply 실행에 대한 머지 패칭이 진행되게끔 기능이 추가</a>되었고,
이 기능이 바로 <a href="https://kubernetes.io/docs/reference/using-api/server-side-apply/">SSA(Server Side Apply)</a>다.</p><p>SSA를 사용하면 이제 더이상 <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 를 사용하지 않는다.
오로지 <code class="language-text">managedFields</code> 만을 사용하여 API 서버에서 머지 패칭을 진행하며, 필드의 관리 주체가 아닌 주체가 필드를 업데이트하려고 한다면 Conflict 메시지와 함께 업데이트가 진행되는 것을 막는다.</p><p>SSA 옵션을 한번 사용해보자.</p><p>위에서 만든 Configmap 오브젝트를 삭제하고 다시 다음처럼 Configmap Manifest를 준비한다.</p><div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token comment"># cm-ssa.yaml</span>

<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> cm<span class="token punctuation">-</span>ssa
<span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">&quot;value&quot;</span></code></pre></div><p>이제 <code class="language-text">kubectl apply</code> 로 배포할건데, 이 때 다음처럼 <code class="language-text">--server-side</code> 옵션을 같이 준다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl apply -f cm-ssa.yaml --server-side

configmap/cm-ssa serverside-applied</code></pre></div><p>만들어진 오브젝트를 확인해보자.</p><div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl get cm cm-ssa -o yaml --show-managed-fields

apiVersion: v1
data:
  key: value
kind: ConfigMap
metadata:
  creationTimestamp: <span class="token string">&quot;2022-12-22T15:08:14Z&quot;</span>
  managedFields:
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:data:
        f:key: <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="gatsby-highlight-code-line">    manager: kubectl</span>    operation: Apply
    time: <span class="token string">&quot;2022-12-22T15:08:14Z&quot;</span>
  name: cm-ssa
  namespace: default
  resourceVersion: <span class="token string">&quot;2263083&quot;</span>
  uid: f5485a89-a8a8-4d42-a948-39977f88042a</code></pre></div><p>먼저 <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 가 없는 것을 알 수 있다.
또한 <code class="language-text">manager</code>가 <code class="language-text">kubectl</code> 이 된 것을 볼 수 있다.
(CSA로 배포했을 때는 <code class="language-text">manager</code> 가 <code class="language-text">kubectl-client-side-apply</code> 였다.)</p><p>이제 다음처럼 오브젝트에 라벨 <code class="language-text">key: value</code> 을 추가해본다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl label cm cm-ssa <span class="token assign-left variable">key</span><span class="token operator">=</span>value

configmap/cm-ssa labeled</code></pre></div><p>그리고 CSA의 문제 상황을 만든 것처럼 Manifest 파일을 다음처럼 수정하자.</p><div class="gatsby-highlight has-highlighted-lines" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token comment"># cm-ssa.yaml</span>

<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> cm<span class="token punctuation">-</span>ssa
<span class="gatsby-highlight-code-line">  <span class="token key atrule">labels</span><span class="token punctuation">:</span></span><span class="gatsby-highlight-code-line">    <span class="token key atrule">key</span><span class="token punctuation">:</span> modified<span class="token punctuation">-</span>value</span><span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">&quot;value&quot;</span></code></pre></div><p>아까와 같이 <code class="language-text">kubectl apply</code> 에 <code class="language-text">--server-side</code> 옵션을 주어 배포한다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl apply -f cm-ssa.yaml --server-side

error: Apply failed with <span class="token number">1</span> conflict: conflict with <span class="token string">&quot;kubectl-label&quot;</span> using v1: .metadata.labels.key
Please review the fields above--they currently have other managers. Here
are the ways you can resolve this warning:
* If you intend to manage all of these fields, please re-run the apply
  <span class="token builtin class-name">command</span> with the <span class="token variable"><span class="token variable">`</span>--force-conflicts<span class="token variable">`</span></span> flag.
* If you <span class="token keyword">do</span> not intend to manage all of the fields, please edit your
  manifest to remove references to the fields that should keep their
  current managers.
* You may co-own fields by updating your manifest to match the existing
  value<span class="token punctuation">;</span> <span class="token keyword">in</span> this case, you&#x27;ll become the manager <span class="token keyword">if</span> the other manager<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
  stop managing the field <span class="token punctuation">(</span>remove it from their configuration<span class="token punctuation">)</span>.
See https://kubernetes.io/docs/reference/using-api/server-side-apply/<span class="token comment">#conflicts</span></code></pre></div><p>이번엔 아까 CSA를 사용할 때와는 다르게 에러 메시지가 등장한다.
메시지를 해석해보면, <code class="language-text">.metadata.labels.key</code> 값의 관리 주체는 <code class="language-text">kubectl-label</code> 인데 지금 너(<code class="language-text">kubectl</code>)랑 달라서 충돌이 나고, 업데이트를 할 수 없다는 것이다.</p><p>그리고 여기에 대한 대안 3가지를 다음처럼 말해준다.</p><ol><li>이렇게 덮어쓰는 걸 의도한게 맞다면, <code class="language-text">--force-conflicts</code> 을 붙여서 기존 관리 주체를 무시하고 CSA처럼 그냥 덮어써라.</li><li>의도한게 아니라면, Manifest 파일에서 관리 주체가 다른 필드(여기서는 <code class="language-text">.metadata.labels.key</code>)를 빼라.</li><li>해당 필드에 대한 관리 주체를 너(<code class="language-text">kubectl</code>)를 포함시켜라. (이 경우, 기존 관리 주체가 해당 필드를 포기하면 필드 관리 권한은 나에게 넘어온다.)</li></ol><p>사실상 현실적인 선택지는 1번과 2번인거 같다.
3번은 결국 관리 주체로 내가 포함되어도, 소유권은 여전히 기존 관리 주체에게 있기 때문에, 바로 해당 필드를 삭제하거나 업데이트할 수가 없기 때문이다.</p><h2 id="그래서-ssa는-왜-쓰는가" style="position:relative"><a href="#%EA%B7%B8%EB%9E%98%EC%84%9C-ssa%EB%8A%94-%EC%99%9C-%EC%93%B0%EB%8A%94%EA%B0%80" aria-label="그래서 ssa는 왜 쓰는가 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>그래서 SSA는 왜 쓰는가?</h2><p>그럼 위에서 1을 선택하면 결과적으로는 CSA랑 별 차이를 모르겠는데, 그럼 대체 SSA는 CSA와 비교하여 무엇이 좋으며, 왜 써야하는걸까?</p><p>여러 사이트에서 의견을 찾아보고 정리하면 다음과 같다.</p><ul><li>CSA와 다르게 SSA는 Conflict을 내기 때문에, 실수로 기존 관리 주체를 그대로 덮어써버리는 실수를 줄일 수 있다.</li><li>CSA는 (내가) 관리하지 않아도 되는 필드를 모두 적어줘야했지만, SSA는 (내가) 관리할 필드만 적어서 제출하면 된다.</li><li>복잡한 CR(Custom Resource)을 CSA로 쓰면 <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 이 꽤 비대해지는데, 더 이상 이런 비대한 필드를 볼 일이 없고, etcd의 저장 공간을 아낄 수 있다.</li></ul><p>개인적인 생각으로는 SSA는 한 오브젝트에 대해 여러 관리 주체가 수정을 시도할 때, CSA보다 조금 더 정밀하고 안전하게 시도할 수 있게끔 해주는게 가장 큰 장점인거 같다.</p><p>한편, 여러 관리 주체가 수정을 시도하는 환경이 아니라면(예를 들어 모든 <code class="language-text">kubectl</code> 을 팀 내 한 사람만 쓴다든지, ArgoCD만을 이용하여 배포한다든지),
내 생각엔 굳이 SSA까지 써야하나 싶은 생각도 든다.</p><h2 id="code-classlanguage-text--dry-runservercode" style="position:relative"><a href="#code-classlanguage-text--dry-runservercode" aria-label="code classlanguage text  dry runservercode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">--dry-run=server</code></h2><p>한편 SSA를 쓰는 경우, 다음처럼 <code class="language-text">--dry-run=client</code> (<code class="language-text">--dry-run</code> 과 동일)은 쓸 수 없다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl apply -f cm-ssa.yaml --server-side --dry-run<span class="token operator">=</span>client

error: --dry-run<span class="token operator">=</span>client doesn&#x27;t work with --server-side <span class="token punctuation">(</span>did you mean --dry-run<span class="token operator">=</span>server instead?<span class="token punctuation">)</span></code></pre></div><p>상식적으로 생각해봐도 API 서버를 안거치는 <code class="language-text">--dry-run=client</code> 와 API 서버를 거쳐야 하는 <code class="language-text">--server-side</code> 는 같이 사용하는 것은 이상하며, 상충되는 일이다.
따라서 SSA를 쓰는 경우 <code class="language-text">--dry-run</code> 을 사용하고 싶다면, 다음처럼 <code class="language-text">--dry-run=server</code> 을 사용해야 한다.</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ kubectl apply -f cm-ssa.yaml --server-side --dry-run<span class="token operator">=</span>server

configmap/cm-ssa serverside-applied <span class="token punctuation">(</span>server dry run<span class="token punctuation">)</span></code></pre></div><blockquote><p>한편 CSA를 쓰면서 <code class="language-text">--dry-run=server</code> 을 쓰는 것은 가능하다.
그럼 <code class="language-text">--dry-run</code> 의 값으로 <code class="language-text">client</code> 와 <code class="language-text">server</code> 는 무슨 차이인가? 하면 <code class="language-text">client</code> 는 요청이 API Server 내 Admission Controller를 거치지 않는 한편,
<code class="language-text">server</code> 는 거친다. 따라서, <code class="language-text">--dry-run</code> 으로 배포에 문제가 없는지 확인하고 싶다면 <code class="language-text">server</code> 값을 사용하는게 맞고, 단순히 <code class="language-text">-o yaml</code> 옵션과 함께
YAML 스펙만 확보하고 싶다면 <code class="language-text">client</code> 옵션만 써도 무방하다.
이에 대한 자세한 내용이 궁금하다면 <a href="https://nunoadrego.com/posts/kubectl-dry-run/">이 블로그 글</a>을 참고하면 좋을거 같다.</p></blockquote><h2 id="정리" style="position:relative"><a href="#%EC%A0%95%EB%A6%AC" aria-label="정리 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>정리</h2><p>지금까지 작성한 내용을 요약, 정리하면 다음과 같다.</p><ul><li>kubectl은 초기에 CSA만 지원했고, CSA를 사용하면 kubectl은 오브젝트 업데이트에 <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 필드를 머지 패칭에 활용했다.</li><li>그러나 이는 한 필드에 대해 여러 관리 주체가 있는 경우, Conflict 없이 쉽게 기존 값을 덮어써서 문제가 될 수 있었다.</li><li>kubectl에 SSA가 등장했고, SSA를 사용하면 <code class="language-text">kubectl.kubernetes.io/last-applied-configuration</code> 은 사용되지 않고, kubectl이 아닌 API 서버가 머지 패칭을 진행한다.</li><li>필드에 기존과 다른 관리 주체가 업데이트를 시도하면 Conflict 에러가 나고 업데이트를 진행시키지 않는다. 따라서 더 안전하게 업데이트(Apply)를 진행할 수 있다.</li></ul><blockquote><p>잘못되거나 틀린 내용이 있을 수 있습니다.
이러한 부분은 댓글로 말씀해주시면 정말 감사하겠습니다.</p></blockquote><h2 id="참고" style="position:relative"><a href="#%EC%B0%B8%EA%B3%A0" aria-label="참고 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>참고</h2><ul><li><a href="https://kubernetes.io/docs/reference/using-api/server-side-apply/">https://kubernetes.io/docs/reference/using-api/server-side-apply/</a></li><li><a href="https://kubernetes.io/blog/2022/10/20/advanced-server-side-apply/">https://kubernetes.io/blog/2022/10/20/advanced-server-side-apply/</a></li><li><a href="https://kubernetes.io/blog/2022/11/04/live-and-let-live-with-kluctl-and-ssa/">https://kubernetes.io/blog/2022/11/04/live-and-let-live-with-kluctl-and-ssa/</a></li><li><a href="https://github.com/kubernetes/enhancements/blob/master/keps/sig-api-machinery/555-server-side-apply/README.md">https://github.com/kubernetes/enhancements/blob/master/keps/sig-api-machinery/555-server-side-apply/README.md</a></li><li><a href="https://argo-cd.readthedocs.io/en/latest/proposals/server-side-apply/#motivation">https://argo-cd.readthedocs.io/en/latest/proposals/server-side-apply/#motivation</a></li><li><a href="https://www.youtube.com/watch?v=P12z8X-qhis&amp;ab_channel=AquaSecurityOpenSource">https://www.youtube.com/watch?v=P12z8X-qhis&amp;ab_channel=AquaSecurityOpenSource</a></li><li><a href="https://nunoadrego.com/posts/kubectl-dry-run/">https://nunoadrego.com/posts/kubectl-dry-run/</a></li></ul></div><div id="disqus_thread"></div></main><footer><ul class="external-links"><li><a href="https://www.facebook.com/heumsi/"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.8 90.69 226.4 209.3 245V327.7h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.3 482.4 504 379.8 504 256z"></path></svg></a></li><li><a href="https://www.linkedin.com/in/siheum-jeon-04222a1b3/"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li><a href="https://github.com/heumsi/"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li><a href="https://bit.ly/3zAT8Ab"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="file-lines" class="svg-inline--fa fa-file-lines " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M256 0v128h128L256 0zM224 128L224 0H48C21.49 0 0 21.49 0 48v416C0 490.5 21.49 512 48 512h288c26.51 0 48-21.49 48-48V160h-127.1C238.3 160 224 145.7 224 128zM272 416h-160C103.2 416 96 408.8 96 400C96 391.2 103.2 384 112 384h160c8.836 0 16 7.162 16 16C288 408.8 280.8 416 272 416zM272 352h-160C103.2 352 96 344.8 96 336C96 327.2 103.2 320 112 320h160c8.836 0 16 7.162 16 16C288 344.8 280.8 352 272 352zM288 272C288 280.8 280.8 288 272 288h-160C103.2 288 96 280.8 96 272C96 263.2 103.2 256 112 256h160C280.8 256 288 263.2 288 272z"></path></svg></a></li></ul><p class="copy-right">@ heumsi</p></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/server-side-apply-in-kubernetes/";window.___webpackCompilationHash="9023d6fb65f6071942db";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4aa291e7e6681714b3e8.js"],"app":["/app-c321c5efdf12999a1dd7.js"],"component---src-components-templates-log-js":["/component---src-components-templates-log-js-8be2b192cec9967ef4ea.js"],"component---src-components-templates-post-js":["/component---src-components-templates-post-js-d80014afc9ad124b5ee3.js"],"component---src-pages-404-js":["/component---src-pages-404-js-5ed0d86fb0763a04a4b4.js"],"component---src-pages-index-js":["/component---src-pages-index-js-67136b30be5717c21631.js"],"component---src-pages-logs-index-js":["/component---src-pages-logs-index-js-bf19e8f568991d11bb86.js"],"component---src-pages-posts-index-js":["/component---src-pages-posts-index-js-2779df3cf8aef25ec545.js"]};/*]]>*/</script><script src="/blog/polyfill-4aa291e7e6681714b3e8.js" nomodule=""></script><script src="/blog/app-c321c5efdf12999a1dd7.js" async=""></script><script src="/blog/framework-c9b92197cbae3c33e091.js" async=""></script><script src="/blog/webpack-runtime-d16735df36b4c0712223.js" async=""></script></body></html>